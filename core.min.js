function cybs_dfprofiler(e,a){if("live"===a.toLowerCase())var t="k8vif92e";else var t="1snn5n9w";var o=(new Date).getTime(),r=document.createElement("p");str="background:url(https://h.online-metrix.net/fp/clear.png?org_id="+t+"&session_id="+e+o+"&m=1)",r.styleSheets=str,r.height="0",r.width="0",r.hidden="true",document.body.appendChild(r);var i=document.createElement("img");str="https://h.online-metrix.net/fp/clear.png?org_id="+t+"&session_id="+e+o+"&m=2",i.src=str,document.body.appendChild(i);var n=document.createElement("script");n.src="https://h.online-metrix.net/fp/check.js?org_id="+t+"&session_id="+e+o,n.type="text/javascript",document.body.appendChild(n);var c=document.createElement("object");c.data="https://h.online-metrix.net/fp/fp.swf?org_id="+t+"&session_id="+e+o,c.width="1",c.height="1",c.id="thm_fp";var s=document.createElement("param");return s.name="movie",s.value="https://h.online-metrix.net/fp/fp.swf?org_id="+t+"&session_id="+e+o,c.appendChild(s),document.body.appendChild(c),o}function onPromoClick(e,a,t,o){return dataLayer.push({event:"promotionClick",ecommerce:{promoClick:{promotions:[{id:e,name:a,creative:t,position:o}]}}}),!0}function clicProducto(e,a){var t=JSON.parse(e);return dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:a},products:[{name:t.producto,id:t.id,price:t.precio,brand:t.marca,category:t.categoria,affiliation:t.tienda,position:t.posicion}]}}}),!0}function onCheckout(e){return dataLayer.push({event:"checkout",ecommerce:{checkout:{actionField:{step:1,option:"Web"},products:e}}}),!0}function promoView(e){""!==e&&dataLayer.push({event:"promoView",ecommerce:{promoView:{promotions:e}}})}function productListView(e){""!==e&&(dataLayer.push({ecommerce:{currencyCode:"MXN",impressions:e}}),console.log(e))}function agregarProductoCarrito(e){e=e||"compra";var a=document.getElementById(e);console.log(a);var t=a.nombre.value,o=a.id.value,r=a.precio.value,i=a.marca.value,n=a.categoria.value,c=a.tienda.value,s=parseInt(a.c.value),l=a.num_parte.value;return dataLayer.push({event:"agregarProductoCarrito",ecommerce:{currencyCode:"MXN",add:{products:[{name:t,id:o,price:r,brand:i,category:n,affiliation:c,quantity:s,dimension7:r,dimension8:l}]}}}),!0}function agregarProductoListaDeseos(){var e=document.compra;console.log(e);var a=e.nombre.value,t=e.id.value,o=e.precio.value,r=e.marca.value,i=e.categoria.value,n=e.tienda.value,c=parseInt(e.c.value),s=e.num_parte.value;return dataLayer.push({event:"agregarProductoListaDeseos",ecommerce:{currencyCode:"MXN",add:{products:[{name:a,id:t,price:o,brand:r,category:i,affiliation:n,quantity:c,dimension7:o,dimension8:s}]}}}),!0}function oneclick(){return dataLayer.push({event:"botonOneClick",eventAction:"click",eventCategory:"UX",eventLabel:"oneclick"}),!0}function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function validateCel(e){return Number.parseInt(e),!(e.length<1)&&(!isNaN(e)&&(!(e.length>10)&&(!(e.length<7)&&(0!=e&&1111111111!=e&&2222222222!=e&&3333333333!=e&&4444444444!=e&&5555555555!=e&&6666666666!=e&&7777777777!=e&&8888888888!=e&&9999999999!=e&&1234567890!=e&&123456789!=e))))}function cerrar_sesion(e){return e.preventDefault(),loading(!0),$.ajax({type:"POST",url:"/mi-cuenta/cerrar-sesion/",data:"a",dataType:"json",complete:function(e){ModuleLocalStorage.LocalStorage.clearAllData();window.location.href;window.location="/",setTimeout(function(){loading(!1)},500)}})}function onLogoutHandler(e){$.ajax({type:"POST",url:"/mi-cuenta/social-login/ini.php",data:"action=logoff",dataType:"json",success:function(e){"ERROR"===e.returnVal?$("#reg_error").text(e.error):window.location.reload()}})}function number_format(e,a,t,o){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var r=isFinite(+e)?+e:0,i=isFinite(+a)?Math.abs(a):0,n=void 0===o?",":o,c=void 0===t?".":t,s="";return s=(i?function(e,a){var t=Math.pow(10,a);return""+Math.round(e*t)/t}(r,i):""+Math.round(r)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,n)),(s[1]||"").length<i&&(s[1]=s[1]||"",s[1]+=new Array(i-s[1].length+1).join("0")),s.join(c)}function in_array(e,a,t){var o="";if(!t){for(o in a)if(a[o]===e)return!0}else for(o in a)if(a[o]===e)return!0;return!1}function functiontofindIndexByKeyValue(e,a,t){for(var o=0;o<e.length;o++)if(e[o][a]==t)return o;return null}function getFormData(e){var a=e.serializeArray(),t={};return $.map(a,function(e,a){t[e.name]=e.value}),t}function Chatea(){var e=window.open("https://www.telvistaservices.com.mx/des/ClaroshopCode/Clientesweb/claroshop/Default.aspx?Department=3030","name","height=530,width=395,directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no");window.focus&&e.focus()}function is_0_valid(){if(count=0,document.ProfileForm.optin&&document.ProfileForm.optin.checked&&document.getElementsByName("interest[]")&&document.getElementsByName("interest[]").length>0){for(Interest=document.getElementsByName("interest[]"),i=0;i<Interest.length;i++)Interest[i].checked&&++count;if(0==count)return error+="Intereses:",!1}return!0}function is_3_valid(e){if(""==e)return error+="Correo electrónico: !\n",!1;var a=/^(.+)@(.+)$/,t=/^\[(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\]$/,o='[^\\s\\(\\)<>@,;:\\\\\\"\\.\\[\\]]+',r="("+o+'|("[^"]*"))',i=new RegExp("^"+r+"(\\."+r+")*$"),n=new RegExp("^"+o+"(\\."+o+")*$"),c=e.match(a);if(null==c)return error+="E-Mail: \n",!1;var s=c[1],l=c[2];if(null==s.match(i))return error+="E-Mail: \n",!1;var d=l.match(t);if(null!=d){for(var u=1;u<=4;u++)if(d[u]>255)return error+="E-Mail: \n",!1;return!0}if(null==l.match(n))return error+="E-Mail: \n",!1;var p=new RegExp(o,"g");return!(l.match(p).length<2&&(error+="E-Mail: \n",1))}function CheckInputs(){var e=!0;return error="!\n",e=is_0_valid("null")&&e,e=is_3_valid(document.ProfileForm.inp_3.value)&&e,0==e&&alert(error),e}function SubmitIt(){1==CheckInputs()&&(window.onbeforesubmit&&onbeforesubmit(),document.ProfileForm.submit())}function MailIt(){CheckInputs()&&(""==document.ProfileForm.subject.value||""==document.ProfileForm.msg.value?alert("Bitte für Sie die Nachrichtenfelder aus!"):document.ProfileForm.submit())}function FieldWithName(e,a,t){for(t||(t=0),field_count=0,i=0;i<e.elements.length;++i)if(e.elements[i].name==a){if(field_count==t)return e.elements[i];field_count++}}function NumChecked(e,a){var t=0;for(i=0;i<e.elements.length;++i)e.elements[i].name==a&&1==e.elements[i].checked&&++t;return t}function NumSel(e){var a=0;for(i=0;i<e.length;++i)1==e[i].selected&&++a;return a}function busquedaES(){var e=$(".elasticsearch #search").val();if(""!==e.trim()&&void 0!==e&&null!==e){var a="",t=document.location.origin,o=$(".elasticsearch #selectCategoriasMenu").val(),r=encodeURIComponent(e.trim()),i=btoa(r);""!==o&&void 0!==o&&null!==o&&(a="categoria/"+o),action=t+"/buscador/"+i+"/1/"+a,location.href=action}}function buscaSugerencia(e){return!1}function getWordSearch(){var e=JSON.parse(localStorage.getItem("words"));$(".elasticsearch #recentSearch").empty();var a="<ul>";if(void 0!==e&&null!==e){for(var t=(document.location.origin,0);t<e.length;t++)a+='<li><a title="'+e[t]+'" onclick="buscaPaginado(this)" class="/buscador/'+btoa(unescape(encodeURIComponent(e[t])))+'/1" href="#a">'+e[t]+"</a></li>";$(".elasticsearch #recentSearch").css({display:"block"})}a+='</ul><a onclick="removeWordsSearch();" class="resetHistory" href="#">Borrar Historial</a>',$(a).appendTo("#recentSearch")}function removeWordsSearch(){storedNames=JSON.parse(localStorage.getItem("words")),void 0!==storedNames&&null!==storedNames&&localStorage.removeItem("words")}function saveWordSearch(e){var a=[];if(storedNames=JSON.parse(localStorage.getItem("words")),void 0!==storedNames&&null!==storedNames)for(var t=0;t<storedNames.length;t++){var o=a.indexOf(storedNames[t]);-1!==o&&a.splice(o,1),a.push(storedNames[t])}var r=a.indexOf(e);-1!==r&&a.splice(r,1),a.push(e),localStorage.setItem("words",JSON.stringify(a))}function validaEnter(e){var a=$(".elasticsearch #search").val(),t=!1;return 13!=e.which&&13!=e.keyCode||(""!==a&&void 0!==a&&null!==a?(t=!0,busquedaES()):t=e.preventDefault()),t}function obtenerParamUrl(e){for(var a=window.location.search.substring(1),t=a.split("&"),o=0;o<t.length;o++){var r=t[o].split("=");if(r[0]==e)return r[1]}return null}function cambiarParamUrl(e,a,t){var o,r,i,n,c,s,l;if("object"!=typeof e)return!1;vacio(a)&&(a=window),l=a.location.href,void 0==t&&(t="?"),-1==l.indexOf(t)?(c=l,n=[]):(i=l.split(t),c=i[0],n=i[1].split("&"));for(var d in e){s=!1;for(var u in n)o=n[u],0==o.indexOf(d+"=")&&(s=!0,""==e[d]?n.splice(u,1):n[u]=d+"="+e[d]);s||""==e[d]||n.push(d+"="+e[d])}return r=0==n.length?c:c+t+n.join("&"),a.location.href=r,r}function dimensionarVentana(e,a){$("#fancybox-wrap").width(e+10).height(a+10),$("#fancybox-inner").width(e).height(a),$("#fancybox-content").width(e).height(a),$.fancybox.center()}function busqueda(){if("Productos"==$("#searchDropdownBox").html())$("#h_finder").submit();else{var e=$("#q").val();window.location.href="/s/?q="+e}return!0}function valida_puja(e,a,t){if("error"===e){popupSubastaLogin();var o=document.getElementById("btn_si");o.addEventListener("click",function(){envio(a,t)});document.getElementById("btn_sregistro").addEventListener("click",function(){window.location="/registrate/"})}else{popupSubasta();var o=document.getElementById("btn_ssi");o.addEventListener("click",function(){parseInt(document.getElementById("cantidad").value)>0&&"success"===e&&document.frmPuja.submit()})}return!1}function envio(e,a){return window.location.href="/mi-cuenta/iniciar-sesion/?r=s&next="+encodeURIComponent("subasta/"+e+"/"+a+"/"),!1}function close_popup(){return document.getElementById("contain_popup").style.display="none",document.getElementById("contain_popup").empty(),!1}function popupSubasta(){var e=document.getElementById("contain_popup"),a=document.createElement("div");a.setAttribute("class","contSubasta"),e.appendChild(a);var t=document.createElement("div");t.setAttribute("class","cerrar"),t.setAttribute("onclick","close_popup();"),a.appendChild(t);var o=document.createElement("p"),r=document.createTextNode("¿Esta seguro de realizar esta oferta?");o.appendChild(r),a.appendChild(o);var i=document.createElement("div");i.setAttribute("class","subastas-popup-btns"),a.appendChild(i);var n=document.createElement("button");n.setAttribute("class","btn-oferta"),n.setAttribute("id","btn_ssi"),n.setAttribute("type","button"),i.appendChild(n);var c=document.createElement("span"),s=document.createTextNode("SI");c.appendChild(s),n.appendChild(c);var l=document.createElement("button");l.setAttribute("class","btn-oferta"),l.setAttribute("type","button"),l.setAttribute("onclick","close_popup();"),i.appendChild(l);var d=document.createElement("span"),u=document.createTextNode("NO");return d.appendChild(u),l.appendChild(d),document.getElementById("contain_popup").style.display="block",!1}function popupSubastaLogin(){var e=document.getElementById("contain_popup"),a=document.createElement("div");a.setAttribute("class","contSubasta"),e.appendChild(a);var t=document.createElement("div");t.setAttribute("class","cerrar"),t.setAttribute("onclick","close_popup();"),a.appendChild(t);var o=document.createElement("p"),r=document.createTextNode("¿Cuentas con un usuario de Sanborns?");o.appendChild(r),a.appendChild(o);var i=document.createElement("div");i.setAttribute("class","subastas-popup-btns"),a.appendChild(i);var n=document.createElement("button");n.setAttribute("class","btn-rojo"),n.setAttribute("id","btn_si"),n.setAttribute("type","button"),i.appendChild(n);var c=document.createElement("span"),s=document.createTextNode("Iniciar sesion");c.appendChild(s),n.appendChild(c);var l=document.createElement("p"),d=document.createTextNode("Ó si eres nuevo por favor");l.appendChild(d),a.appendChild(l);var u=document.createElement("div");u.setAttribute("class","subastas-popup-btns"),a.appendChild(u);var p=document.createElement("button");p.setAttribute("class","btn-azul"),p.setAttribute("type","button"),p.setAttribute("id","btn_sregistro"),u.appendChild(p);var m=document.createElement("span"),g=document.createTextNode("Registrate");return m.appendChild(g),p.appendChild(m),document.getElementById("contain_popup").style.display="block",!1}function justNumbers(e){var a=window.event?window.event.keyCode:e.which;return 8==a||46==a||/\d/.test(String.fromCharCode(a))}function justLetters(e){var a=window.event?window.event.keyCode:e.which;if(8!=a){var t=new RegExp("^[ a-zA-ZñÑáéíóúÁÉÍÓÚ]+$"),o=String.fromCharCode(a);return!!t.test(o)||(e.preventDefault(),!1)}}function lettersandnumbers(e){var a=window.event?window.event.keyCode:e.which;if(8!=a){var t=new RegExp("^[ a-zA-ZñÑáéíóúÁÉÍÓÚ0-9]+$"),o=String.fromCharCode(a);return!!t.test(o)||(e.preventDefault(),!1)}}function masDireccion(){document.getElementById("nueva_direccion").reset(),document.getElementById("id_dir").value="",$("#form_dpersonales").show(),$("#menosDireccion").toggle(),$("#masDireccion").toggle()}function menosDireccion(){document.getElementById("nueva_direccion").reset(),document.getElementById("id_dir").value="",$("#form_dpersonales").hide(),$("#masDireccion").toggle(),$("#menosDireccion").toggle()}function abrirForm(e){$("#form_agregar_datos"+e).show(),$("#form_abrir"+e).hide()}function guardarDatosFaltantes(e,a){$("#form_mensaje_error"+e).html("");var t=validarNumExt(e);actualizarDatos(e,a,validarCelular(e),t)}function actualizarDatos(e,a,t,o){$.ajax({type:"POST",url:"procesos/?a=7",dataType:"JSON",data:{celular:t,num_ext:o,cliente:a,direccion:e},beforeSend:function(){$("#btnActualizarDatos"+e).hide(),$("#form_mensaje_error"+e).html(procesando)},success:function(e){e.status?window.location=e.href:$(".error").show().text(e.message)}})}function validarNumExt(e){var a=null;return $("#numExtAgregar"+e).length&&(a=$("#numExtAgregar"+e).val(),a.length<1&&($("#numExtAgregar"+e).focus(),$("#form_mensaje_error"+e).html(error_nulo+"n&uacute;mero exterior."),exit()),$.isNumeric(a)||($("#numExtAgregar"+e).val(""),$("#numExtAgregar"+e).focus(),$("#form_mensaje_error"+e).html(error_nulo+"n&uacute;mero exterior."),exit())),a}function validarCelular(e){var a=null;return $("#celularAgregar"+e).length&&(a=$("#celularAgregar"+e).val(),a.length<1?($("#celularAgregar"+e).focus(),$("#form_mensaje_error"+e).html(error_nulo+"n&uacute;mero celular."),exit()):isNaN(a)?($("#form_mensaje_error"+e).html(error_entero),exit()):a.length<10?($("#form_mensaje_error"+e).html(error_digitos),exit()):0!=a&&1111111111!=a&&2222222222!=a&&3333333333!=a&&4444444444!=a&&5555555555!=a&&6666666666!=a&&7777777777!=a&&8888888888!=a&&9999999999!=a&&1234567890!=a&&123456789!=a||($("#form_mensaje_error"+e).html(error_numeros_invalidos),exit())),a}function datosPago(e){document.getElementById("descuentos").innerHTML="-$"+e.descuentos,document.getElementById("total_venta").innerHTML="$"+e.total_venta,document.getElementById("costo_envioReal").innerHTML="$"+e.costo_envioReal,e.descuento_compra>0&&(document.getElementById("descuento_compra").innerHTML="$"+e.descuento_compra);for(var a=document.getElementById("productos_comprados"),t="",o=0;o<e.productos.length;o++)t+='<dl class="productoComprar">',void 0!==e.productos[o].regalo?(t+="<dt class='rc_regalo'><span class=\"regalo-icon\"></span>Producto de Regalo</dt>",t+="<dt class='rc_regalo'>"+e.productos[o].nombre+"</dt>"):t+="<dt>"+e.productos[o].nombre+"</dt>",e.productos[o].precio>0&&(t+="<dd>$"+e.productos[o].precio+"</dd>"),void 0!==e.productos[o].regalo?t+='<dt class="rc_cantidad rc_regalo">Cantidad: '+e.productos[o].cantidad+" piezas</dt>":t+='<dt class="rc_cantidad">Cantidad: '+e.productos[o].cantidad+" piezas</dt>",e.productos[o].precioSubtotal>0&&(t+="<dd>$"+e.productos[o].precioSubtotal+"</dd>"),t+="</dl>";a.innerHTML="",a.innerHTML=t;var r=document.getElementById("envio_datos");r.innerHTML="";var i="";i+="<li><span>"+e.envio.nombre+"</span></li>",i+="<li>"+e.envio.direccion+"</li>",i+="<li>"+e.envio.colonia+", CP "+e.envio.cp+"</li>",i+="<li>"+e.envio.ciudad+", "+e.envio.estado+"</li>",i+='<li class="ico-phone">Tel Cel.'+e.envio.celular+"</li>",r.innerHTML=i}function getCategorias(e,a,t,o,r){var i="",n="",c="",s="",l="";t&&""!=t&&(l="/marca/"+t);var d="";o&&""!=o&&(d="/precio/"+o),loading(!0),$.ajax({type:"GET",url:"/categoriaajax/"+e+"/pagina/"+a+"/ordenado/"+r+l+d,dataType:"json",success:function(e){loading(!1),$.each(e.productos,function(e,a){a.descuento>0&&(i='<div class="desc">-%'+a.descuento+"<span>Descuento</span></div>"),a.precio<a.precioLista&&(c="<span>"+a.precioLista+"</span>"),a.financiamiento>0?(n='<p class="pagos">Desde <span>'+a.financiamiento+"</span>",n+='al mes</p><div class="tiendas"><span class="telmex"></span><span class="sears"></span></div>'):n='<p class="pagos">&nbsp;</p><div class="tiendas"><span>&nbsp;</span></div>',s='<article class="card__product">',s+='<a class="descuento" href="/producto/'+a.id+'/" >',s+=i,s+='<div class="contImgProd"><img src="'+a.foto+'"></div>',s+='<p class="producto">'+a.nombre+"</p>",s+='<p class="precio">$'+a.precio,s+=c+"</p>",s+=n+"</p></a></article>",i=n=c="",$("#containerProductos").append(s)}),scrollLoad=!0},error:function(e){loading(!1)}})}function getCategoriaRefresh(e,a,t,o,r,i,n){var c="";t&&""!=t&&(c="/marca/"+t);var s="";o&&""!=o&&(s="/preciom/"+o),r&&""!=r&&(s+="/precioM/"+r),location.href=n+"/pagina/"+a+"/ordenado/"+i+c+s}function personalEmarsysBuscador(e,a,t,o){ScarabQueue.push(["recommend",{logic:a,containerId:t,templateId:"RelacionadoNav_nuevo",limit:o,success:function(e,a){a(e)}}]),e&&ScarabQueue.push(["go"]),addSlider("emarsysBuscador",8,"")}var sendAddToCart=function(e){var a=e.nombre.value,t=e.id.value,o=e.precio.value,r=e.marca.value,i=e.categoria.value,n=e.tienda.value,c=parseInt(e.c.value),s=e.num_parte.value;return dataLayer.push({event:"addToCart",ecommerce:{currencyCode:"MXN",add:{products:[{name:a,id:t,price:o,brand:r,category:i,affiliation:n,quantity:c,dimension7:o,dimension8:s}]}}}),!0};$(document).ready(function(){$("#login").click(function(){if(loading(!0),validarFormulario("formRegister"),!validateEmail($("#loginEmail").val()))return $("#loginMessage").text("Por favor ingresa un correo electrónico válido"),$("#loginMessage").show(),setTimeout(function(){$("#loginMessage").hide()},3e3),loading(!1),!1;if(null==$("#loginPassword").val()||""==$("#loginPassword").val())return $("#loginMessage").text("Por favor ingresa tu password"),$("#loginMessage").show(),setTimeout(function(){$("#loginMessage").hide()},3e3),loading(!1),!1;var e={tkn_login:$("input[name='tkn_login']").val(),email:$("#loginEmail").val(),password:$("#loginPassword").val(),redirect:$("#redirect").val(),recordar:$("#chk_terminos").is(":checked")?1:0,clickRecoge:$("#clickRecoge").val(),irPago:$("#irPago").val(),action:$("#flagSelfs").length?$("#flagSelfs").val():"login"},a=window.location.href;return $.ajax({type:"POST",url:"/newlogin?redirect="+a,data:e,dataType:"json",success:function(e){switch(e.carrito&&ModuleCarrito.Carrito.juntarCarritos(),e.returnVal){case"SUCCESS":e.redirect?window.location.href=e.redirect:(loading(!1),window.history.go(-1));break;case"SUCCESSBURO":window.top.location.href=e.redirect;case"REVIEW":console.log("gigya.js comentado para validar uso");break;case"SUCCESSL":window.open(e.redirect,"_blank"),window.top.location.href="/selfservice/";break;case"SUCCESSCR":window.location.href=e.redirect;break;default:$("#loginMessage").text(e.error),$("#loginMessage").show(),loading(!1),window.parent.$.fancybox.update()}}}),!1}),$("#register").click(function(){if(loading(!0),""!==$("#celular").val()?($("#celular").attr("required",""),$("#celular").attr("data-validate","celular")):($("#celular").removeAttr("required"),$("#celular").removeClass("error")),validarFormulario("formRegister"),""!==$("#celular").val()&&!validateCel($("#celular").val()))return $("#registrationMessage").text("Por favor ingresa un celular válido  "),$("#registrationMessage").show(),$("#celular").addClass("error"),loading(!1),!1;if(!validateEmail($("#email").val()))return $("#registrationMessage").text("Por favor ingresa un correo electrónico válido  "),$("#registrationMessage").show(),loading(!1),!1;if(null==$("#password").val()||""==$("#password").val()||null==$("#repassword").val()||""==$("#repassword").val())return $("#registrationMessage").text("Por favor ingresa tu password"),$("#registrationMessage").show(),loading(!1),!1;if($("#password").val()!=$("#repassword").val())return $("#registrationMessage").text("El password y el password de verificación no son iguales"),$("#registrationMessage").show(),loading(!1),!1;if(null==$("#firstnameReg").val()||""==$("#firstnameReg").val())return $("#registrationMessage").text("Por favor ingresa tu nombre"),$("#registrationMessage").show(),loading(!1),!1;var e=/^[a-zA-ZÀ-ÿ\u00f1\u00d1 -]+(\s*[a-zA-ZÀ-ÿ\u00f1\u00d1 -]*)*[a-zA-ZÀ-ÿ\u00f1\u00d1 -]+$/g,a=$("#firstnameReg").val().trim();if(!e.test(a))return $("#registrationMessage").text("... Nombre Incorrecto!!"),$("#registrationMessage").show(),loading(!1),!1;if(null==$("#lastnameReg").val()||""==$("#lastnameReg").val())return $("#registrationMessage").text("Por favor ingresa tu apellido"),$("#registrationMessage").show(),loading(!1),!1;var e=/^[a-zA-ZÀ-ÿ\u00f1\u00d1 -]+(\s*[a-zA-ZÀ-ÿ\u00f1\u00d1 -]*)*[a-zA-ZÀ-ÿ\u00f1\u00d1 -]+$/g,a=$("#lastnameReg").val().trim();if(!e.test(a))return $("#registrationMessage").text("... Apellido Incorrecto!!"),$("#registrationMessage").show(),loading(!1),!1;if(!$("#chk_terminos_politica").is(":checked")||!$("#chk_terminos_politica").prop("checked"))return $("#registrationMessage").text("Debes aceptar los terminos, condiciones y políticas de privacidad"),$("#registrationMessage").show(),loading(!1),!1;var t={email:$("#email").val(),password:$("#password").val(),firstname:$("#firstnameReg").val(),lastname:$("#lastnameReg").val(),lastnameM:$("#lastnameMReg").val(),celular:$("#celular").val(),ofertas:$("#chk_ofertas").is(":checked")?"on":"off",privacidad:$("#chk_privacidad").val(),terminos_politicas:$("#chk_terminos_politica").val(),link_referido:$("#link_referido").val(),irPago:$("#irPago").val(),action:$("#flagRegSelfs").length?$("#flagRegSelfs").val():"register",redirect:$("#redirect").val(),redirectOC:$("#redirectOC").val()};$("#registrationMessage").text(""),$("#registrationMessage").hide();var o=window.location.href;return $.ajax({type:"POST",url:"/registrate/recibe?redirect="+o,data:t,dataType:"json",success:function(e){"SUCCESS"==e.returnVal?e.redirect.indexOf("loginregistro")>-1?window.history.go(-1):window.location.href=e.redirect:(loading(!1),$("#registrationMessage").text("Error: "+e.error),$("#registrationMessage").show())}}),!1}),$("#linkAccount").click(function(){if(!validateEmail($("#linkEmail").val()))return $("#linkMessage").text("Por favor ingresa un email"),window.parent.$.fancybox.update(),!1;if(null==$("#linkPassword").val()||""==$("#linkPassword").val())return $("#linkMessage").text("Por favor ingresa un password"),window.parent.$.fancybox.update(),!1;var e={tkn_login:$("input[name='tkn_login']").val(),email:$("#linkEmail").val(),password:$("#linkPassword").val(),action:"linkAccounts"};return $.ajax({type:"POST",url:"/mi-cuenta/social-login/ini.php",data:e,dataType:"json",success:function(e){switch(e.returnVal){case"SUCCESS":window.parent.ajaxLogin(),window.parent.$.fancybox.close(),window.location.href=e.redirect,loading(!1);break;default:loading(!1),alert(e.error)}}}),!1}),$("#provideEmail").on("click",function(){if(console.log($(this).text()),!validateEmail($("#missingEmail").val()))return $("#provideEmailMessage").text("Please enter a valid e-mail address"),$("#provideEmailMessage").show(),window.parent.$.fancybox.update(),!1;var e={loginEmail:$("#missingEmail").val(),action:"provideEmail"};return $("#provideEmailMessage").text(""),$("#provideEmailMessage").hide(),$.ajax({type:"POST",url:"/mi-cuenta/social-login/ini.php",data:e,dataType:"json",success:function(e){switch(e.returnVal){case"SUCCESS":window.parent.ajaxLogin(),window.parent.$.fancybox.close(),loading(!1);break;case"EMAIL_NOT_UNIQUE":loading(!1),$("#provideEmailMessage").html("El email ya se encuentra registrado en Claroshop. Por favor ingresa otro correo electrónico o haz clic aqui para <a href='/mi-cuenta/iniciar-sesion/enlazar-cuentas.php'>enlazar tus cuentas</a>. "),$("#provideEmailMessage").show();break;default:loading(!1),$("#provideEmailMessage").text("Regsitration Failed. Error message: "+e.error),$("#provideEmailMessage").show()}}}),!1})});var onLoginHandler=function(e){console.log(e);var a=window.location,t={userObject:e,action:"socialLogin",urlActual:a.search};try{loading(!0),$.post("/mi-cuenta/social-login/ini.php",t,function(a){switch(console.log(a),a.returnVal){case"ERROR":console.log("Gigya Login error : "+a.error);break;case"SUCCESS":window.parent.ajaxLogin(),window.parent.$.fancybox.close(),"facebook"===e.provider&&$("#cooked").show(),window.top.location.href=a.redirect,loading(!1);break;case"MISSING_EMAIL":window.location="/mi-cuenta/iniciar-sesion/solicitar-email.php";break;case"EMAIL_NOT_UNIQUE":window.location="/mi-cuenta/iniciar-sesion/enlazar-cuentas.php";break;default:alert("default, onLoginHandler: "+a.success)}},"json")}catch(e){console.log(e),loading(!1)}return!1},cleanCharactersGTM=function(e){var a=e,t=a.text();text1=t.replace(/g��a/g,"gía"),text2=text1.replace(/tr��n/g,"trón"),text3=text2.replace(/m��s/g,"més"),text4=text3.replace(/r��a/g,"ría"),text5=text4.replace(/d��n/g,"dín"),text6=text5.replace(/i��n/g,"ión"),text7=text6.replace(/��si/g,"úsi"),text8=text7.replace(/u��e/g,"uñe"),text9=text8.replace(/i��a/g,"iña"),text10=text9.replace(/i��o/g,"iño"),text11=text10.replace(/i��o/g,"iño"),text12=text11.replace(/l��ct/g,"léct"),text13=text12.replace(/c��n/g,"cán"),text14=text13.replace(/��mp/g,"ómp"),text15=text14.replace(/eb��/g,"ebé"),text16=text15.replace(/f��a/g,"fía"),text17=text16.replace(/l��cu/g,"lícu"),text18=text17.replace(/n��a/g,"nía"),text19=text18.replace(/��ne/g,"íne"),text20=text19.replace(/m��t/g,"mét"),text21=text20.replace(/l��gi/g,"lógi"),text22=text21.replace(/��di/g,"édi"),text23=text22.replace(/a��al/g,"añal"),text24=text23.replace(/am��/g,"amá"),text25=text24.replace(/ap��/g,"apá"),text26=text25.replace(/��mar/g,"ámar"),text27=text26.replace(/d��f/g,"díf"),text28=text27.replace(/iÃ±o/g,"iño"),text29=text28.replace(/iÃ±a/g,"iña"),text30=text29.replace(/ãƒâ¡/g,"á"),text30_0=text30.replace(/tÃƒÂ¡¡/g,"ká"),text31=text30_0.replace(/Ã¡/g,"á"),text32=text31.replace(/Ã©/g,"é"),text33=text32.replace(/Ã­*/g,"í"),text34=text33.replace(/í³/g,"ó"),text35=text34.replace(/Ãº/g,"ú"),text36=text35.replace(/Ã/g,"Á"),text37=text36.replace(/Ã‰/g,"É"),text38=text37.replace(/Ã­/g,"Í"),text39=text38.replace(/Ã“/g,"Ó"),text40=text39.replace(/Ãš/g,"Ú"),text41=text40.replace(/Ã±/g,"ñ"),text42=text41.replace(/Ã‘/g,"Ñ"),text51=text42.replace(/g�a/g,"gía"),text52=text51.replace(/tr�n/g,"trón"),text53=text52.replace(/m�s/g,"més"),text54=text53.replace(/r�a/g,"ría"),text55=text54.replace(/d�n/g,"dín"),text56=text55.replace(/i�n/g,"ión"),text57=text56.replace(/�si/g,"úsi"),text58=text57.replace(/u�e/g,"uñe"),text59=text58.replace(/i�a/g,"iña"),text60=text59.replace(/i�o/g,"iño"),text61=text60.replace(/i�o/g,"iño"),text62=text61.replace(/l�ct/g,"léct"),text63=text62.replace(/c�n/g,"cán"),text64=text63.replace(/�mp/g,"ómp"),text65=text64.replace(/eb�/g,"ebé"),text66=text65.replace(/f�a/g,"fía"),text67=text66.replace(/l�cu/g,"lícu"),text68=text67.replace(/n�a/g,"nía"),text69=text68.replace(/�ne/g,"íne"),text70=text69.replace(/m�t/g,"mét"),text71=text70.replace(/l�gi/g,"lógi"),text72=text71.replace(/�di/g,"édi"),text73=text72.replace(/a�al/g,"añal"),text74=text73.replace(/am�/g,"amá"),text75=text74.replace(/ap�/g,"apá"),text76=text75.replace(/�mar/g,"ámar"),text77=text76.replace(/d�f/g,"díf"),text78=text77.replace(/�/g,""),text79=text78.replace(/i\\/g,"i"),newText=text79,a.html(newText)},sepomex=function(e,a){var t=$("#"+a).serializeArray();if(t.action="cp",parseInt(e)&&5===e.length){var o;loading(!0),$.ajax({async:!0,type:"POST",dataType:"JSON",url:"/sepomex.php",data:t,success:function(e){e.estado.length>0?document.getElementById("estado").value=e.estado[0].d_estado:(o=document.getElementById("estado").value="",alert("En nuestros registros no encontramos tu cp, intenta con otro"),document.getElementById("cpostal").value="");var a=document.getElementById("estado").value;changeEstadoSepomex(a),$("#colonia").removeAttr("disabled"),$("#estado").removeAttr("disabled"),$("#municipio").removeAttr("disabled"),$("#ciudad").removeAttr("disabled"),loading(!1)},timeout:1e6,error:problemas})}else loading(!1)},changeEstadoSepomex=function(e){d=document.getElementById("cpostal").value;var a="";if(d.length>=5){loading(!0);var t={cpostal:d,estado:e,action:"estado"};$.ajax({async:!0,type:"POST",dataType:"JSON",url:"/sepomex.php",data:t,success:function(e){loading(!1),$("#municipioContainer span").remove(""),$("#municipio").remove(),e.municipios.length>0?($("#municipioContainer").append("<span class=\"select\"><select name='municipio' onchange='removeMunicipioCombo(this);' id='municipio' required='required'></select></span>"),$.each(e.municipios,function(e,t){a+="<option value='"+t.d_mnpio+"'>"+t.d_mnpio+"</option>"}),a+="<option value='none'> Me gustaría escribirla por mi mismo.</option>",$("#municipio").html(""),$("#municipio").html(a)):($("#municipioContainer span").remove(),$("#municipioContainer").append("<input type='text' maxlength='35' name='municipio' id='municipio' value='' />")),$("#coloniaContainer span").remove(""),$("#colonia").remove(),e.colonia.length>0?($("#coloniaContainer").append("<span class=\"select\"><select name='colonia' onchange='removeContainer(this);' id='colonia' required='required'></select></span>"),a="",$.each(e.colonia,function(e,t){a+="<option value='"+t.d_asenta+"'>"+t.d_asenta+"</option>"}),a+="<option value='none'> Me gustaría escribirla por mi mismo.</option>",$("#colonia").html(""),$("#colonia").html(a)):($("#coloniaContainer span").remove(),$("#coloniaContainer").append("<input type='text' maxlength='35' name='colonia' id='colonia' value='' />"));var t=document.getElementById("ciudad");e.colonia.length>0?t.value=e.ciudad.d_ciudad:t.value=""},timeout:1e6,error:problemas})}else loading(!1);return!0},removeContainer=function(e){var a,t;"none"===e.value&&(a=$(e).parent(),t=a.parent(),a.remove(),t.append("<input type='text' name='colonia' id='colonia' value='' pattern='.{5,50}' maxlength=\"50\" minlength=\"5\" required/>"))},removeMunicipioCombo=function(e){var a,t;"none"===e.value&&(a=$(e).parent(),t=a.parent(),a.remove(),t.append("<input type='text' name='municipio' id='municipio' value='' pattern='.{5,50}' maxlength=\"50\" minlength=\"5\" required/>"))},problemas=function(){return console.log("Errores en conexion"),!1},transformJSON=function(e){var a=$("#"+e).serializeObject();return console.log(a),a},error,form_lanuage="es",agregado=!1,vacio=function(e){var a;if(""===e||0===e||"0"===e||null===e||!1===e||void 0===e)return!0;if("object"==typeof e){for(a in e)return!1;return!0}return!1},barraInferior=function(e){var a={id_categoria:e};re;$.ajax({type:"post",url:"/categoria/subcategorias/ini.php",dataType:"json",cache:!1,data:a,success:function(a){$("#submenu_"+e).html("");var t=document.getElementById("submenu_"+e);$.each(a,function(e,a){var o=document.createElement("dl");o.setAttribute("class","g-4");var r=document.createElement("dt"),i=document.createElement("a");i.href="/categoria/"+e+"/"+a.seo+"/";var n=document.createTextNode("Todas las Promociones");i.appendChild(n),r.appendChild(i),o.appendChild(r),t.appendChild(o),Object.keys(a.hijas).length>0&&$.each(a.hijas,function(e,a){var o=document.createElement("dl");o.setAttribute("class","g-4");var r=document.createElement("dt"),i=document.createElement("a");i.href="/categoria/"+e+"/"+a.seo+"/"
;var n=document.createTextNode(a.nombre);i.appendChild(n),r.appendChild(i),o.appendChild(r),Object.keys(a.hijas).length>0&&$.each(a.hijas,function(e,a){var t=document.createElement("dd"),r=document.createElement("a");r.href="/categoria/"+e+"/"+a.seo+"/";var i=document.createTextNode(a.nombre);r.appendChild(i),t.appendChild(r),o.appendChild(t)}),t.appendChild(o)})})},error:function(){}})},ajaxCarrito=function(){var e=$("#compra").serialize(),a="/carrito/procesos/?"+e+"&ajax=1";return $.ajax({type:"get",url:a,dataType:"json",success:function(e){var a=parseInt(e);$("#cart_count").text(a),$("#cantidadProductos a").attr("href","#"),window.location="/carrito/"},beforeSend:function(){$("body").ScrollTo(500),$("#cart_count").text(""),$("#cantidadProductos a").attr("href","#")},error:function(){}}),!1},ajaxCarritoSolo=function(){return $.ajax({type:"get",url:"/carrito/getCantidadTotalProductos/",dataType:"json",success:function(e){loading(!1);var a=parseInt(e);a>0||Object.keys(e).length?($("#cart_count").text(a),$("#cart_count2").text(a),$("#cantidadProductos a").attr("href","/carrito/")):($("#cart_count").text(a),$("#cart_count2").text(a),$("#cantidadProductos a").attr("href","#")),recreaSlider()},beforeSend:function(){loading(!0),$("body").ScrollTo(500),$("#cart_count").text(""),$("#cantidadProductos a").attr("href","#")},error:function(){loading(!1)}}),!1},validateForm=function(e){var a=!1;return""!==e.email.value&&""!==e.contrasena.value&&(a=!0),a},formularioProducto=function(e){return e.comprar.classList.add("active"),e.comprar.setAttribute("disabled","disabled"),!0},carritoLoader=function(){var e={};$.ajax({type:"post",url:"/carrito/procesos/?a=99&ajax=1",dataType:"json",cache:!1,data:e,success:function(e){var a=parseInt(e);a>0?($("#cart_count").text(a),$("#cantidadProductos a").attr("href","/carrito/"),$("#botonComprarPreview").attr("href","/carrito/")):($("#cart_count").text(a),$("#cantidadProductos a").attr("href","#"),$("#botonComprarPreview").attr("href","#"))},error:function(){}}),previewCarrito(),ajaxLogin()},subastaLoader=function(){$("#subastaContent").html("");return $.ajax({type:"post",url:"/subasta/ajax/",cache:!1,dataType:"json",success:function(e){if(e&&e.id_subasta>0){var a=document.getElementById("subastaContent"),t=document.getElementById("subastaContent2");a.innerHTML="",t.innerHTML="";var o='<h3>Oferta Actual</h3><div data-fechafin="'+e.fecha_final+'" class="counter"><div id="countdown"><div class="dash days_dash"><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="dash_title">Dias.</div></div><div class="dash hours_dash"><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="dash_title">Hrs.</div></div><div class="dash minutes_dash"><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="dash_title">Min.</div></div><div class="dash seconds_dash"><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="digit"><div class="top" style="display: none;">0</div><div class="bottom" style="display: block;">0</div></div><div class="dash_title">Seg.</div></div></div></div><div class="productSub"><div class="contImg"><img src="'+e.foto[0].Foto+'"></div><div class="contProd"><form action="'+decodeURIComponent("/subasta/"+e.id_subasta+"/"+e.seo+"/")+'" name="frmPujaPop" id="frmPujaPop" method="post" ><dl><dt>'+e.nombre_subasta+"</dt></dl><p>Mínimo a ofertar<strong>$"+parseInt(e.precio_inicial)+'</strong></p><div class="ofertar">';!1===e.login?o+='<label>$</label><input type="number" value="'+(parseInt((parseInt(e.precio_maximo)+parseInt(e.precio_inicial))/2)+10)+'"><a href="/mi-cuenta/iniciar-sesion/?r=s&next='+encodeURIComponent("subasta/"+e.id_subasta+"/"+e.seo+"/")+'" class="btn-rojo">Ofertar</a>':o+='<label>$</label><input name="id" type="hidden" value="'+e.id_subasta+'"><input min="'+parseInt(e.precio_inicial)+'" max="'+parseInt(e.precio_maximo)+'" type="number" value="'+parseInt((parseInt(e.precio_maximo)+parseInt(e.precio_inicial))/2)+'" name="cantidad" id="cantidad"><a onclick="return launchSubasta();" class="btn-rojo">Ofertar</a>',o+="</div></form><a href=\"/subastas/\" class=\"link\">Ver todas las subastas</a></div></div><div class='productUrl'><div class='guias'><p>¿Quieres aprender a subir sus subastas?</p><a href='/subastas/guia/'>Ver guia de subastas</a></div></div>",a.innerHTML=o,t.innerHTML=o,timeSubasta()}},beforeSend:function(){$("#subastaContent").append('<img class="subastaLoader" src="/css/img/barra_cargador.gif" width="80" alt="" />')},error:function(){}}),!1},limpiaCampos=function(){document.getElementById("formPregunta").reset()};$(document).ready(function(){$("form#formPregunta2").submit(function(e){e.preventDefault();var a=$(this).find("input#name").val(),t=$(this).find("input#email").val(),o=$(this).find("select#type").val(),r=$(this).find("textarea#message").val(),i=$(this).find("input#idProduct").val();if(!/^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i.test(t))return alert("El Correo Electrónico no es valido"),!1;loading(!0),$.ajax({method:"POST",url:"/pregunta",data:{idProducto:i,nombre:a,correo:t,tipo:o,pregunta:r},beforeSend:function(){loading(!0)},success:function(e){alert(" su pregunta ha sido enviada"),loading(!1),$.fancybox.close()},error:function(){console.log("ubo un error!"),alert(" su pregunta ha sido enviada"),loading(!1),$.fancybox.close()}})}),$("form#formPregunta").submit(function(e){e.preventDefault();var a=$(this).find("input#name").val(),t=$(this).find("input#email").val(),o=$(this).find("select#type").val(),r=$(this).find("textarea#message").val(),i=$(this).find("input#idProduct").val();if(!/^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i.test(t))return alert("El Correo Electrónico no es valido"),!1;loading(!0),$.ajax({method:"POST",url:"/pregunta",data:{idProducto:i,nombre:a,correo:t,tipo:o,pregunta:r},beforeSend:function(){loading(!0)},success:function(e){alert(" su pregunta ha sido enviada"),loading(!1),$.fancybox.close()},error:function(){console.log("ubo un error!"),alert(" su pregunta ha sido enviada"),loading(!1),$.fancybox.close()}})}),$(".subastas").mouseover(function(){$("#subastaContent").html().length>0||subastaLoader()}),$("body").delegate(".icoEM","click",function(){$.fancybox.open({width:400,height:300,href:"#compartirEmail",autoSize:!1}),console.log("aqui es compartir el correo..."),$producto=$(this).data(),console.log($producto),void 0!==$producto.idproducto?(loading(!0),console.log("idProducto ===> "+$producto.idproducto),$("#compartirEmail").html(""),$.get("/producto/compartirEmail/"+$producto.idproducto,function(e){loading(!1),$("#compartirEmail").html('<h4>Compartir este artículo por e-mail</h4><div class="contElements">  <div class="contImage"><img id="image" src="'+e.foto_mini+'" alt="imagen"></div>   <div class="contDescrip">   <p class="strong">'+e.nombre+"</p>   <p>"+e.embarcado+'</p>   <p> <strong >Enlace: </strong><a href="'+e.urlshorten+'" target="_blank">'+e.urlshorten+'</a></p>   </div>   </div><form class="compartirEm" id="compartirEm">   <fieldset id="listaCorreos">       <label>Para:</label>       <input id="emailcompartir" name="email" placeholder="Introduce direcciones de email: pedro@ejemplo.com.mx, marisa@ejemplo.com.mx.  No se utilizarán con fines promocionales." type="text">   </fieldset>   <fieldset>       \x3c!--<input type="checkbox" checked="">       <label>Enviarme una copia de este email</label>--\x3e   </fieldset>   <fieldset>       <div class="redesSociales"></div>       <input type="hidden" name="producto" id="productocompartidoid" value="'+$producto.idproducto+'">       <button id="btn_compartir" type="button" class="btn-blue">Enviar email</button>   </fieldset></form>'),$("#emailcompartir").tagThis({email:!0,noDuplicates:!0,defaultText:"Email",width:"96%",height:"40px"})}).fail(function(e){loading(!1),console.log(e)}).always(function(){loading(!1)})):console.log("No hay propiedad en .icoEM idProducto")}),$("#compartirEmail").delegate("#btn_compartir","click",function(){Array.prototype.unique=function(e){return function(){return this.filter(e)}}(function(e,a,t){return t.indexOf(e,a+1)<0});var e=[];if($("#listaCorreos span").each(function(){"x"!=$(this).text().substr(-1,1)&&e.push($(this).text())}),e=e.unique(),e.length>0){console.log($("#compartirEm").serializeArray()),loading(!0);var a=$("#productocompartidoid").val();$.post("/producto/compartirEmail/"+a,{correos:e},function(e,a){loading(!1),"success"===e.responseEmsys.status?($.fancybox.close(),console.log("correo enviado")):console.log("Error al enviar el correo"),console.log(e,a)}).fail(function(e){loading(!1),console.log(e)}),console.log("Datos validos")}else console.log("Datos invalidos")})});var launchSubasta=function(){document.forms.frmPujaPop.submit()},editarDir=function(e){$("#errorCPcuenta").html("").hide(),loading(!0),parseInt(e)>0&&$.ajax({url:"/mi-cuenta/direcciones-envio/procesos/obtenerDireccionAjax/",type:"GET",async:!1,dataType:"JSON",data:{iddir:e},success:function(e){console.log(e);var a=e.tipolocacion,t=e.pisono,o=e.usabilidad,r=e.esregalo;$(".agrDireccion").fadeIn("fast"),document.getElementById("id_dir").value=e.id,document.getElementById("nombre").value=e.nombre,document.getElementById("apellidopaterno").value=e.apellidopaterno,document.getElementById("apellidomaterno").value=e.apellidomaterno,document.getElementById("personaautorizada").value=e.personaautorizada,$("input[name=entregaen][value='"+a+"']").attr("checked",!0),$("input[name=nivel][value='"+t+"']").attr("checked",!0),$("input[name=usabilidad][value='"+o+"']").attr("checked",!0),document.getElementById("celular").value=e.telefono,document.getElementById("cpostal").value=e.codigoPostal,document.getElementById("num_ext").value=e.numeroExterior,document.getElementById("num_int").value=e.numeroInterior,document.getElementById("direccion").value=e.calle,document.getElementById("entreCalles").value=e.entre_calles1,document.getElementById("entreCalles2").value=e.entre_calles2,document.getElementById("observaciones").value=e.referencias,document.getElementById("estado").value=e.estado,$("#estado").removeAttr("disabled");var i="<option value='"+e.municipio+"'>"+e.municipio+"</option>";$("#municipio").html(""),$("#municipio").html(i),$("#municipio").removeAttr("disabled"),$("#coloniaContainer span").remove(),$("#colonia").remove(),$("#coloniaContainer").append("<span class=\"select\"><select name='colonia' onchange='removeContainer(this);' id='colonia' required='required' style='width: 500px'></select></span>");var n="<option value='"+e.colonia+"'>"+e.colonia+"</option>";$("#colonia").html(""),$("#colonia").html(n),$("#colonia").removeAttr("disabled"),document.getElementById("ciudad").value=e.ciudad,$("#ciudad").removeAttr("disabled"),loading(!1),!0===r?$("#esregalo").attr("checked",!0):$("#esregalo").attr("checked",!1),document.getElementById("mensaje").value=e.mensajeregalo;var c=$(".newDirection.top").position().top+60;$("html,body").animate({scrollTop:c},900)},error:function(e,a,t){loading(!1),alert("Te invitamos a comunicarte con nosotros, o crear una nueva direccion de envio por favor")}})},resetDireccion=function(){loading(!0),$(".agrDireccion").fadeOut("fast"),document.getElementById("id_dir").value="",document.getElementById("nombre").value="",document.getElementById("apellidopaterno").value="",document.getElementById("apellidomaterno").value="",document.getElementById("celular").value="",document.getElementById("cpostal").value="",document.getElementById("direccion").value="",document.getElementById("entreCalles").value="",document.getElementById("entreCalles2").value="",document.getElementById("observaciones").value="";$("#estado").html(""),$("#estado").html("<option value=''>Selecciona uno</option>"),$("#estado").attr("disabled","disabled");$("#municipio").html(""),$("#municipio").html("<option value=''>Verifica tu CP</option>"),$("#municipio").attr("disabled","disabled");$("#colonia").html(""),$("#colonia").html("<option value=''>Verifica tu CP</option>"),$("#colonia").attr("disabled","disabled"),document.getElementById("ciudad").value="",$("#ciudad").attr("disabled","disabled"),loading(!1)},validarFormulario=function(e){loading(!0);var a=!1;x=document.getElementsByClassName("erroresEmergen");var t=recorrerFormulario(e);$.inArray(0,validateForm(t))<0&&(a=!0);var o;for(o=0;o<x.length;o++)x[o].style.display="none";if(a){var o;for(o=0;o<x.length;o++)x[o].style.display="none"}else{var o;for(o=0;o<x.length;o++)x[o].style.display="block";loading(!1)}return a},validateElement=function(e,a){var t=0,o=document.getElementById(e.name);switch(e.value.trim().length>0?(t=1,o.className=""):(t=0,o.className="error",a||o.focus()),o.getAttribute("data-validate")){case"email":t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(o.value);break;case"tarjeta":var r=o.value,i=/^[0-9]{12,16}$/;!0===i.test(r)?(t=1,o.className=""):(t=0,o.className="error");break;case"tarjetaSears":var r=o.value,i=/^[0-9]{12,13}$/;!0===i.test(r)?(t=1,o.className=""):(t=0,o.className="error");break;case"cvv":var r=o.value,i=/^[0-9]{3,4}$/;!0===i.test(r)?(t=1,o.className=""):(t=0,o.className="error");break;case"cp":var n=o.value,i=/^[0-9]{5}$/;!0===i.test(n)?(t=1,o.className=""):(t=0,o.className="error");break;case"telefono":var c=o.value,i=/^[0-9]{10}$/;!0===i.test(c)?(t=1,o.className=""):(t=0,o.className="error");break;case"celular":var s=o.value,i=/^[0-9]{10}$/;!0===i.test(s)?(t=1,o.className=""):(t=0,o.className="error");break;case"transfer":var l=o.value,i=/^[0-9]{12}$/;!0===i.test(l)?(t=1,o.className=""):(t=0,o.className="error");break;case"securePass":var d=o.value,u=d.trim(),i=/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/;!0===i.test(u)?(t=1,o.className=""):(t=0,o.className="error")}return t},validateForm=function(e){var a,t=!1,o=new Array;for(o.push(1),a=0;a<e.length;++a)if(!0===e[a].attr){var r=validateElement(e[a],t);!1===r&&(t=!0),o.push(r)}return o},recorrerFormulario=function(e){var a=[];console.log(e);var t=document.getElementById(e);for(console.log(t),i=0;i<t.elements.length;i++){var o={};o.name=t.elements[i].name,o.value=t.elements[i].value,o.attr=t.elements[i].required,a.push(o)}return a},mostrarForm=function(e){$(".agrDireccion").fadeIn("fast"),emptyForm(e),window.location.hash="#anclaDireccion"},emptyForm=function(e){var a=document.getElementById(e);for(i=0;i<a.elements.length;i++)"radio"!=a.elements[i].type&&"checkbox"!=a.elements[i].type&&(a.elements[i].value=""),!0===a.elements[i].required&&(a.elements[i].className="");return!1},resumenPago=function(e){var a=e.id,t="";t={idform:a.split("_")[1],bim:""},$.ajax({type:"POST",url:"/caja/forma-pago/ajax.php",dataType:"JSON",data:t,beforeSend:function(){},success:function(e){datosPago(e)}})},pagoCheckout=function(e,a){if(e>0&&""!==a){var t={idform:e,bim:a.substring(0,6)};$.ajax({type:"POST",url:"/caja/forma-pago/ajax.php",dataType:"JSON",data:t,beforeSend:function(){},success:function(e){datosPago(e)}})}},validateFormaPago=function(e){if($("#delpsearsysanb").val()>0)return document.getElementById("productosAgotadosError").style.display="block",!1;var a=$("input[name=forma_pago]:checked","#"+e).val();return void 0!==a&&("paypal"===a&&loadingPaypal(!0),window.location.href="/caja/"+a),!1},validateFormaPagoMultienvios=function(e){if($("#delpsearsysanb").val()>0)return document.getElementById("productosAgotadosError").style.display="block",!1;var a=$("input[name=forma_pago]:checked","#"+e).val();return void 0!==a&&("paypal"===a&&loadingPaypal(!0),window.location.href="/caja/multienvios/"+a),!1},validateFormaPagoOxxo=function(e){var a=document.querySelector('input[name="'+e+'"]:checked').value;return""!==a&&(window.location.href="/caja/revisar/procesos/?a=pagar_pedido&r=&formaPago="+a),!1},validarFormaDeposito=function(e){var a=document.querySelector('input[name="'+e+'"]:checked').value;return""!==a&&(window.location.href="/caja/revisar/procesos/?a=pagar_pedido&r=&formaPago=deposito&banco="+a),!1},validateFormaPagoOxxoMultiDir=function(e){var a=document.querySelector('input[name="'+e+'"]:checked').value;return""!==a&&(window.location.href="/caja/multienvios/dineromail/procesar.php?pago="+a),!1},validateFormaPagoPaypal=function(e){return window.location.href="/caja/paypal/process/",!0},validafrmCarrito=function(e){var a=parseInt(e.elements[1].value);return isNaN(a)||""==a?(console.log("no ejecuta"),!1):a>=1||a<=99?(loading(!0),a):void 0},forceSubmit=function(e,a,t,o){if(0==t||1==t){if(valor=parseInt(document.getElementById(a).value),isNaN(valor)||""==valor)return;(valor>1||valor<99)&&(valor+=0==t?1:-1,document.getElementById(a).value=valor,$("#"+e).submit())}else $("#"+e).submit();return!1},card=function(e){e.length>=6?$.post("bancomer_checker.php",{bim:e.substring(0,6)},function(e){$("#msi_html").html(e)}):$("#msi_html").html("")},telmexValidate=function(e){return validarFormulario(e.id)},meses=function(e,a){if(""!==e){$.ajax({url:"/caja/tarjetas-departamentales/meses.php",type:"post",dataType:"json",async:!1,data:{idFormaPago:e,msi:a},success:function(e){}})}},general=function(e){if(""!==e){$.ajax({url:"/caja/tarjetas-departamentales/ajax.php",type:"post",dataType:"json",async:!1,data:{idFormaPago:e},success:function(e){}})}},sears=function(e){if(""!==e)switch(e){case"1":general(4384);break;case"2":meses(4384,15);break;case"3":meses(4385,"")}return!0},comparteMail={};!function(e){e.categoria=function(a,t,o){loading(!0),$("#compCatMail").fancybox({width:500,height:300,autoSize:!1,onComplete:e.categoriaFancy(a,t,o)}),loading(!1)},e.categoriaFancy=function(e,a,t){$("#imageCompCat").empty(),htmlImgs='<img src="'+a+'">',$("#imageCompCat").append(htmlImgs),$("#contNombreCat").empty(),htmlNombre="<div>"+t+"</div>",$("#contNombreCat").append(htmlNombre),$("#enlaceCompartir").empty(),htmlEnlace='<a href="/categoria/'+e+'/" >'+t+"</a>",$("#enlaceCompartir").append(htmlEnlace),$("#idcatCompartida").val(e)},e.btnCatCompartida=function(){Array.prototype.unique=function(e){return function(){return this.filter(e)}}(function(e,a,t){return t.indexOf(e,a+1)<0});var e=[];if($("#listaCorreosCat span").each(function(){"x"!=$(this).text().substr(-1,1)&&e.push($(this).text()),console.log("correo:"+$(this).text())}),e=e.unique(),e.length>0){console.log($("#compartirEm2").serializeArray()),loading(!0);var a=$("#idcatCompartida").val(),t=$("#enlaceCompartir").children().first().text();$.post("/producto/compartirEmailCat/"+a,{correos:e,categoria_nombre:t},function(e,a){loading(!1),"success"===e.responseEmsys.status?($.fancybox.close(),console.log("correo enviado")):console.log("Error al enviar el correo"),console.log(e,a)}).fail(function(e){loading(!1),console.log(e)}),console.log("Datos validos")}else console.log("Datos invalidos no hay correos...")}}(comparteMail);var validaMembresiaPuntossinfin=function(){$("#msjRT").removeClass("active"),$("#errorMiTelmex").html("");var e=$("#usuario").val();$("#contrasena").val();parseInt(e)>0&&e.length>1?$("#formulario").submit():($("#errorMiTelmex").html("Verifique su mebresia."),$("#msjRT").addClass("active"))},recarga=function(){$("#various5").fancybox({width:"98%",height:"98%",scrolling:"yes",autoScale:!0,autoDimensions:!0,type:"iframe"})},tallaSegunColor=function(){loading(!0),console.log("Cambiando color"),$colorSelected=$("#color").val(),$("#talla").attr("disabled",!1),$("#talla").find("option").remove().end().append('<option value="" disabled="">Seleccionar</option>').val(""),""!==$colorSelected?$.each(tallas_porColor[$colorSelected],function(e,a){$("#talla").append($("<option>",{value:a.tsize+"|"+a.stock+"|"+a.id,text:a.tsize}))}):$("#talla").attr("disabled",!0),loading(!1)},CambioPrecio=function(e,a){var t={productoId:e,talla:a.value};$.ajax({url:"/carrito/procesos/FancyComboTalla.php",type:"post",dataType:"json",async:!1,data:t,success:function(e){var a=document.getElementById("precioCambio");a.innerHTML="";var t=document.createTextNode("$ "+e.precio+" "),o=document.createElement("span"),r=document.createTextNode("MXN");o.appendChild(r),a.appendChild(t),a.appendChild(o),loading(!1)},beforeSend:function(){loading(!0)},error:function(){loading(!1)}})},validateDireccion=function(e){var a={direccion:e};$.ajax({url:"/caja/direccion-envio/procesos/validate.php",type:"post",dataType:"JSON",async:!1,data:a,success:function(a){if(!0===a.status)if(!0===a.control)window.location="/caja/direccion-envio/procesos/?a=1&id="+e;else{loading(!1);var t=document.getElementById("direccionError");t.style.display="block";var o=document.getElementById("direccionMensajeError");o.innerHTML="Tenemos datos faltantes para procesar tu dirección, ayudanos a completarlos",editarDir(e)}else alert("Te invitamos a usar otra direccion de envio"),window.location.reload()},beforeSend:function(){loading(!0)},error:function(e,a,t){loading(!1),alert("Te invitamos a comunicarte con nuestros, o crear una nueva direccion de envio por favor")}})},addOneclic=function(e){oneclick(),trackfb(e),loading(!0);var a=document.getElementById(e),t=document.createElement("input");return t.type="hidden",t.name="onclick",t.id="onclick",t.value=!0,a.appendChild(t),$("#comprar").trigger("click"),!0},anclas=function(e){posicion=$("#"+e).position().top-100,$(window).scrollTop(posicion)},cambiarCantidad=function(e,a){for(var t=new Array,o="",r=document.getElementsByTagName("select"),i=0;i<r.length;i++){var n=r[i],c=n.name,s=c.split("_");if("cantidad"===s[0]){var l=parseInt(n.value);o=s[1];var d=functiontofindIndexByKeyValue(t,"id",o);if(null===d){var u={id:o,cantidad:0};t.push(u)}var d=functiontofindIndexByKeyValue(t,"id",o);t[d].cantidad=t[d].cantidad+l}}for(i=0;i<a.length;i++){var p=document.getElementById("nomreDir_"+a[i].id),m=document.getElementById("agregDir_"+a[i].id),d=functiontofindIndexByKeyValue(t,"id",a[i].id);a[i].cantidad===t[d].cantidad?(p.style.display="block",m.style.display="none"):(p.style.display="none",m.style.display="block")}},validarCarrito=function(e){for(var a=!1,t=new Array,o=new Array,r="",i=document.getElementsByTagName("select"),n=0;n<i.length;n++){var c=i[n],s=c.name,l=s.split("_");if("cantidad"===l[0]){var d=parseInt(c.value);r=l[1];var u=functiontofindIndexByKeyValue(o,"id",r);if(null===u){var p={id:r,cantidad:0};o.push(p)}var u=functiontofindIndexByKeyValue(o,"id",r);o[u].cantidad=o[u].cantidad+d}}for(n=0;n<e.length;n++){var u=functiontofindIndexByKeyValue(o,"id",e[n].id),m=document.getElementById("nomreDir_"+e[n].id),g=document.getElementById("agregDir_"+e[n].id);e[n].cantidad===o[u].cantidad?(t.push(1),m.style.display="block",g.style.display="none"):(t.push(0),m.style.display="none",g.style.display="block")}return $.inArray(0,t)<0&&(a=!0),loading(!1),a},addMultienvio=function(e,a,t){for(var o=(document.getElementById("multiE_single_"+e),document.getElementById("multiE_cantidad_"+e)),r=document.getElementById("multiE_enviar_"+e),i=o.getElementsByTagName("select"),n=0,c=0;c<i.length;c++){var s=i[c],l=s.name,d=l.split("_"),u=parseInt(d[2]);n<u&&(n=u)}var p=document.createElement("select");p.setAttribute("id","cantidad_"+e+"_"+(u+1)),p.setAttribute("name","cantidad_"+e+"_"+(u+1)),p.setAttribute("onchange","cambiarCantidad(this,carroOriginal)");var m=functiontofindIndexByKeyValue(a,"id",e);if(0===m){var g=document.createElement("option");g.setAttribute("value","1"),g.text="1",p.appendChild(g)}else for(var c=1;c<a[m].cantidad;c++){var g=document.createElement("option");g.setAttribute("value",c),g.text=c,p.appendChild(g)}var v=document.createElement("select");v.setAttribute("id","direccion_"+e+"_"+(u+1)),v.setAttribute("name","direccion_"+e+"_"+(u+1)),v.setAttribute("required","required"),v.setAttribute("onchange","return validarMultiDireccion(this);");for(var c=0;c<t.length;c++){var f=document.createElement("option");f.setAttribute("value",t[c].id),f.text=t[c].direccion,v.appendChild(f)}var f=document.createElement("option");f.setAttribute("value",""),f.text="Agregar una nueva dirección",v.appendChild(f),o.appendChild(p),r.appendChild(v),validarCarrito(a)},validarMultiDireccion=function(e){return""===e.value&&$.fancybox.open({href:"/caja/direccion-envio/iframe.php",type:"iframe",closeBtn:!0}),!0},addAddress=function(e){var a=$("#agregarDireccion"),t=getFormData(a);return $.ajax({url:"/caja/direccion-envio/procesos/agregar/",type:"post",dataType:"JSON",async:!1,data:t,success:function(e){window.top!=window.self?(window.parent.$.fancybox.close(),window.parent.location.reload()):window.history.back()},beforeSend:function(){loading(!0)},error:function(e,a,t){loading(!1),alert("Te invitamos a comunicarte con nuestros, o crear una nueva direccion de envio por favor")}}),!1},direccionPredeterminada=function(e){var a={id:e};$.ajax({url:"/caja/direccion-envio/procesos/direccionPredeterminada/",type:"post",dataType:"JSON",async:!1,data:a,success:function(e){window.location.reload()},beforeSend:function(){loading(!0)},error:function(e,a,t){loading(!1),alert("Te invitamos a comunicarte con nuestros, o crear una nueva direccion de envio por favor")}})},popupCarrito=function(e){var a=validarFormulario(e);return loading(!1),console.log(a),a?loading(!0):alertaGenerica("Selecciona talla/color"),a},trackfb=function(e){var a=document.getElementById(e),t="['"+a.elements.num_parte.value+"']",o=a.elements.nombre.value,r=a.elements.categoria.value,i=a.elements.precioInt.value;return fbq("track","AddToCart",{content_name:o,content_category:r,content_ids:t,content_type:"product",value:i,currency:"MXN"}),!0},cuentaProductos=0,addCart=function(e,a){$.fancybox.close(),2==a&&loading(!0);var t=popupCarrito(e),o=document.getElementById(e),r=o.elements.id.value,i=parseInt($("#precioInt").val()),n=parseInt($("#c").val()),c=!1;if(t){agregarProductoCarrito(e),trackfb(e),carruselrecomendadosCarrito(!0,""+r,i,n);var s=$("#"+e).serializeObject();s.ajax=1;$.ajax({url:"/carrito/createCarrito",type:"POST",dataType:"JSON",async:!1,data:s,success:function(e){$("#cart_count").text(e),$("#cantidadProductos a").attr("href","/carrito/"),cuentaProductos+=parseInt($("#c").val()),$("#anadidos").val(cuentaProductos),loading(!1),fancyCarrito(),c=!0},complete:function(){2==a&&loading(!1),previewCarrito(),recreaSlider("recomendadosCarrito")},beforeSend:function(){loading(!0)},error:function(e,a,t){loading(!1),alertaGenerica("Lo sentimos hubo un problema, por favor intenta más tarde")}})}return c},addCartHome=function(e,a){$.fancybox.close();var t=popupCarrito(e),o=document.getElementById(e),r=(o.elements.id.value,!1),i=$("#cart_count").text();if(t){agregarProductoCarrito(e),trackfb(e);var n=$("#"+e).serializeObject();n.ajax=1;$.ajax({url:"/carrito/createCarrito/",type:"post",dataType:"JSON",async:!1,data:n,success:function(e){$("#cart_count").text(e.cantidad),$("#cantidadProductos a").attr("href","/carrito/"),cuentaProductos+=parseInt($("#c").val()),$("#anadidos").val(cuentaProductos),loading(!1),r=!0},complete:function(){i!=$("#cart_count").text()?(previewCarrito(),$(".box__carrito").addClass("box-visible"),setTimeout(function(){$(".box__carrito").removeClass("box-visible")},1500)):alertaGenerica("Lo sentimos, el producto ya no esta disponible")},beforeSend:function(){loading(!0)},error:function(e,a,t){loading(!1),alertaGenerica("Lo sentimos hubo un problema, por favor intenta más tarde")}})}return r},addCartAnimate=function(e){addCartNewhome(e)},addCartNewhome=function(e,a){var t={};t.id=e,t.ajax=1,t.a=1,t.c=1,prodcar=$("#cart_count").text(),url="/carrito/createCarrito/",$.ajax({url:url,type:"post",dataType:"JSON",async:!1,data:t,success:function(t){$("#cart_count").text(t.cantidad),$("#botonComprarPreview").attr("href","/carrito/"),$("#cantidadProductos a").attr("href","/carrito/"),1==a&&(wishListeliminar(e,1),console.log("El producto se trasladó al carrito de compras!."))},beforeSend:function(){loading(!0)},complete:function(){prodcar!=$("#cart_count").text()?(previewCarrito(),$(".box__carrito").addClass("box-visible"),setTimeout(function(){$(".box__carrito").removeClass("box-visible")},1e3)):alertaGenerica("Lo sentimos, el producto ya no esta disponible."),1!=a&&loading(!1)},error:function(e,t,o){1==a&&console.log("Ocurrió un error al agregar el producto de tu lista de deseos al carrito de compras."),loading(!1),alertaGenerica("Te invitamos a comunicarte con nuestros, o crear una nueva direccion de envio por favor")}})},addCartRecomendaciones=function(e){var a=document.getElementById("agregarRecomendaciones"),t=document.createElement("div");t.setAttribute("class","sliderEmarsys");var o=document.createElement("div");o.setAttribute("id","topic1"),o.setAttribute("class","personal-recs");var r=document.createElement("div");r.setAttribute("id","topic2"),r.setAttribute("class","personal-recs");var i=document.createElement("div");i.setAttribute("id","topic3"),i.setAttribute("class","personal-recs");var n=document.createElement("div");n.setAttribute("id","topic4"),n.setAttribute("class","personal-recs");var c=document.createElement("div");c.setAttribute("id","topic5"),c.setAttribute("class","personal-recs");var s=document.createElement("div");s.setAttribute("id","topic6"),s.setAttribute("class","personal-recs"),t.appendChild(o),t.appendChild(r),t.appendChild(i),t.appendChild(n),t.appendChild(c),t.appendChild(s),a.appendChild(t);for(var l=1;l<7;l++)ScarabQueue.push(["recommend",{logic:"TOPICAL_"+l,limit:1,containerId:"topic"+l,templateId:"simple-tmpl",success:function(e,a){e.topic&&a(e)}}]);e&&ScarabQueue.push(["go"])},addCartRec=function(e,a){var t=document.getElementById("agregarRecomendaciones"),o=document.createElement("div");o.setAttribute("class","sliderEmarsys");var r=document.createElement("div");r.setAttribute("id","topical11"),r.setAttribute("class","personal-recs"),r.setAttribute("style","display:flex;");var i=document.createElement("div");i.setAttribute("id","topical12"),i.setAttribute("class","personal-recs"),i.setAttribute("style","display:flex;"),o.appendChild(r),o.appendChild(i),t.appendChild(o),ScarabQueue.push(["view",a]),ScarabQueue.push(["recommend",{logic:"ALSO_BOUGHT",containerId:"topical11",templateId:"simple-tmpl",limit:4,success:function(e,a){a(e)}}]),e&&ScarabQueue.push(["go"]),ScarabQueue.push(["view",a]),ScarabQueue.push(["recommend",{logic:"CART",containerId:"topical12",templateId:"simple-tmpl",limit:6,success:function(e,a){a(e)}}]),e&&ScarabQueue.push(["go"])},fancyCarrito=function(){$(".slidcar").fancybox({titlePosition:"inside",transitionIn:"none",transitionOut:"none",onComplete:ajaxCarritoSolo()})},mySuccessHandler=function(e,a){for(var t=0,o=e.page.products.length;t<o;t++){var r=e.page.products[t];r.title=normalizarCaracter(r.title),r.precio=r.price.toLocaleString("en"),r.categoria2=r.categoria1="",null!=r.category&&(r.categoria1=r.category,r.categoria2=normalizar(r.category.split(">")[0])),r.imagen=proxyImagenes(r.image)}a(e)},renderTambien=function(e,a){console.log(".......template ------");for(var t=0,o=e.page.products.length;t<o;t++){var r=e.page.products[t];r.title=normalizarCaracter(r.title),r.precio=r.price.toLocaleString("en"),r.categoria2=r.categoria1="",null!=r.category&&(r.categoria1=r.category,r.categoria2=normalizar(r.category.split(">")[0])),r.imagen=proxyImagenes(r.image)}if(t<3){document.getElementById("comprarontambiengeneral").parentNode.style.display="none"}a(e)},showVistos=function(e,a){for(var t="",o=0,r=e.page.products.length;o<r;o++){
var i=e.page.products[o];i.precio=i.price.toLocaleString("en"),i.categoria1=i.category,i.categoria2=normalizar(i.category.split(">")[0]),i.title=normalizarCaracter(i.title),i.contador=j=o+1,i.imagen=proxyImagenes(i.image),t+='<article  data-scarabitem="'+i.id+'" class="productbox">',t+='<div class="vistaRapida"><div class="contImgProd" >',t+='<img src="'+i.imagen+'"/></div>',t+="<a onclick=\"onPromoClick('"+i.link+"','home','lo-mas-nuevo',"+o+');"   href="/producto/'+i.id+'/" class="linkProducto"></a>',t+='<a href="#modal-vistaRapida" onclick="home.modalnewHome('+i.id+');" class="btn-azul newBt">Vista rápida</a></div>',t+='<div class="carruselContenido">',t+='<div class="descrip"><p>'+i.title+"</p></div>",t+='<div class="info">',t+='<div class="infoDesc">',t+="</div>",t+='<span class="preciodesc">$'+i.precio+"</span>",t+='<div class="infoMensualidades">',""!==i.c_mensualidades&&null!=i.c_mensualidades&&(t+='<div class="desde"><span>Desde '+i.c_mensualidades+" al mes</span>",t+='<ul><li class="icoTelmex"></li><li class="icoSears"></li></ul>',t+="</div>"),t+="</div>",t+="</div>",t+='<div class="sellIcons">',t+='<div class="actionIcons"><ul>',t+='<li class="addCart">',"Si"==i.c_tallacolor?(t+='<a href="#modal-vistaRapida" onclick="home.modalnewHome('+i.id+',1);" class="addCart-animate btn-azul tooltip tooltip-effect-1">',t+='<span class="tooltip-content"><p>Agregar a mi carrito</p></span></a>'):(t+='<a href="#!" onclick="addCartAnimate('+i.id+');"  class="addCart-animate tooltip tooltip-effect-1">',t+='<span class="tooltip-content"><p>Agregar a mi carrito</p></span></a>'),t+='</li><li class="lineHeart bheartCarrusel"><a href="#modal-wishlist" onclick="wishList.modalWishlist('+i.id+');" class="blueHeart2 apC'+i.id+' tooltip tooltip-effect-1">',t+='<span class="tooltip-content"><p>Agregar a lista de deseos</p></span></a></li>',t+='<li class="vistaRapidaBtnC">',t+='<a href="#modal-vistaRapida" onclick="home.modalnewHome('+i.id+');" class="btn-azul vistaRapidaBtn tooltip tooltip-effect-1">',t+='<span class="tooltip-content"><p>Vista rápida</p></span></a></li></ul></div>',t+='<div class="shareIcon"><div class="shareMe">',t+='<ul><p>Compartir vía:</p><li><a href="https://www.facebook.com/sharer/sharer.php?u='+i.link+"&t="+i.title+'" target="_blank" class="icoFB"></a></li>',t+='<li><a href="http://twitter.com/home?status=Leyendo '+i.link+' en Sears" target="_blank" class="icoTW"></a></li><li><a href="#compartirEmail" class="icoEM" data-idproducto="'+i.id+'"></a></li><li><a href="whatsapp://send?text='+i.link+'" class="icoWS" data-action="share/whatsapp/share" ></a></li>',t+="</ul></div></div></div></div></article>"}e.topicLocalized&&a(e)},showVistos2=function(e,a){for(var t="",o=0,r=e.page.products.length;o<r;o++){var i=e.page.products[o];i.precio=i.price.toLocaleString("en"),i.categoria1=i.category,i.title=normalizarCaracter(i.title),i.categoria2=normalizar(i.category.split(">")[0]),i.contador=j=o+1,i.imagen=proxyImagenes(i.image),t+='<article  data-scarabitem="'+i.id+'" class="productbox">',t+='<div class="vistaRapida"><div class="contImgProd" >',t+='<img src="'+i.imagen+'"/></div>',t+="<a onclick=\"onPromoClick('"+i.link+"','home','lo-mas-nuevo',"+o+');"   href="/producto/'+i.id+'/" class="linkProducto"></a>',t+='<a href="#modal-vistaRapida" onclick="home.modalnewHome('+i.id+');" class="btn-azul newBt">Vista rápida</a></div>',t+='<div class="carruselContenido">',t+='<div class="descrip"><p>'+i.title+"</p></div>",t+='<div class="info">',t+='<div class="infoDesc">',t+="</div>",t+='<span class="preciodesc">$'+i.precio+"</span>",t+='<div class="infoMensualidades">',""!==i.c_mensualidades&&null!=i.c_mensualidades&&(t+='<div class="desde"><span>Desde '+i.c_mensualidades+" al mes</span>",t+='<ul><li class="icoTelmex"></li><li class="icoSears"></li></ul>',t+="</div>"),t+="</div>",t+="</div>",t+='<div class="sellIcons">',t+='<div class="actionIcons"><ul>',t+='<li class="addCart">',"Si"==i.c_tallacolor?(t+='<a href="#modal-vistaRapida" onclick="home.modalnewHome('+i.id+',1);" class="addCart-animate btn-azul tooltip tooltip-effect-1">',t+='<span class="tooltip-content"><p>Agregar a mi carrito</p></span></a>'):(t+='<a href="#!" onclick="addCartAnimate('+i.id+');"  class="addCart-animate tooltip tooltip-effect-1">',t+='<span class="tooltip-content"><p>Agregar a mi carrito</p></span></a>'),t+='</li><li class="lineHeart bheartCarrusel"><a href="#modal-wishlist" onclick="wishList.modalWishlist('+i.id+');" class="blueHeart2 apC'+i.id+' tooltip tooltip-effect-1">',t+='<span class="tooltip-content"><p>Agregar a lista de deseos</p></span></a></li>',t+='<li class="vistaRapidaBtnC">',t+='<a href="#modal-vistaRapida" onclick="home.modalnewHome('+i.id+');" class="btn-azul vistaRapidaBtn tooltip tooltip-effect-1">',t+='<span class="tooltip-content"><p>Vista rápida</p></span></a></li></ul></div>',t+='<div class="shareIcon"><div class="shareMe">',t+='<ul><p>Compartir vía:</p><li><a href="https://www.facebook.com/sharer/sharer.php?u='+i.link+"&t="+i.title+'" target="_blank" class="icoFB"></a></li>',t+='<li><a href="http://twitter.com/home?status=Leyendo '+i.link+' en Sears" target="_blank" class="icoTW"></a></li><li><a href="#compartirEmail" class="icoEM" data-idproducto="'+i.id+'"></a></li><li><a href="whatsapp://send?text='+i.link+'" class="icoWS" data-action="share/whatsapp/share" ></a></li>',t+="</ul></div></div></div></div></article>",$("#lomasVisto").append(t)}e.topicLocalized&&a(e)},normalizarCaracter=function(){for(var e="ÃÀÄÂÈËÊÌÏÎÒÖÔÙÜÛãàäâèëêìïîòöôùüûÑñÇçÃ³",a="aaaaeeeiiiooouuuaaaaeeeiiiooouuunnccó",t={},o=0,r=e.length;o<r;o++)t[e.charAt(o)]=a.charAt(o);return function(e){for(var a=[],o=0,r=e.length;o<r;o++){var i=e.charAt(o);t.hasOwnProperty(e.charAt(o))?a.push(t[i]):a.push(i)}return a.join("")}}(),normalizar=function(){for(var e="ÃÀÁÄÂÈÉËÊÌÍÏÎÒÓÖÔÙÚÜÛãàáäâèéëêìíïîòóöôùúüûÑñÇç/ ",a="aaaaaeeeeiiiioooouuuuaaaaaeeeeiiiioooouuuunncc-- ",t={},o=0,r=e.length;o<r;o++)t[e.charAt(o)]=a.charAt(o);return function(e){for(var a=[],o=0,r=e.length;o<r;o++){var i=e.charAt(o);t.hasOwnProperty(e.charAt(o))?a.push(t[i]):a.push(i)}return a.join("")}}(),carruselCategory=function(e,a){ScarabQueue.push(["category",a]),ScarabQueue.push(["recommend",{logic:"CATEGORY",containerId:"slideremarsyscategorias",templateId:"RelacionadoNav_nuevo",limit:20,success:mySuccessHandler}]),e&&ScarabQueue.push(["go"])},carruselEmarsysHomeSears20=function(e){ScarabQueue.push(["recommend",{logic:"PERSONAL",containerId:"recomendacionesHomeSears20",templateId:"homeCarruselSears20",limit:20,success:mySuccessHandler}]),e&&ScarabQueue.push(["go"])},showCategoryEmarsys=function(e,a,t,o){ScarabQueue.push(["category",o]),ScarabQueue.push(["recommend",{logic:"CATEGORY",containerId:a,templateId:"RelacionadoNav_nuevo",limit:40,success:mySuccessHandler}]),e&&ScarabQueue.push(["go"])},showCategoryEmarsysHome=function(e){var a=document.getElementById("carruselCatEmarsys"),t=document.createElement("h2");t.setAttribute("class","celulares"),t.innerHTML="Videojuegos";var o=document.createElement("div");o.setAttribute("id","topical9"),o.setAttribute("class","carruselProd js__slider5"),a.appendChild(t),a.appendChild(o),ScarabQueue.push(["category","videojuegos"]),ScarabQueue.push(["recommend",{logic:"CATEGORY",limit:10,containerId:"topical9",templateId:"simple-tmpl-carrusel",success:mySuccessHandler}]),e&&ScarabQueue.push(["go"]);var r=document.getElementById("carruselCatEntreDeportes"),i=document.createElement("h2");i.setAttribute("class","celulares"),i.innerHTML="Juguetes y Deportes";var n=document.createElement("div");n.setAttribute("id","topical10"),n.setAttribute("class","carruselProd js__slider5"),r.appendChild(i),r.appendChild(n),ScarabQueue.push(["category","juguetes | deportes"]),ScarabQueue.push(["recommend",{logic:"CATEGORY",limit:10,containerId:"topical10",templateId:"simple-tmpl-carrusel",success:mySuccessHandler}]),e&&ScarabQueue.push(["go"])},showRatingStars=function(e,a){var t,o,r=!1;$.ajax({type:"GET",url:"/producto/rating/producto/"+a,dataType:"json",success:function(a){1==a.success?(r=!0,t=$("#ratingStars").rateYo({readOnly:!1,fullStar:!0,ratedFill:"#f5a623",starWidth:"32px"}),setTimeout(i,0)):t=$("#ratingStars").rateYo({rating:e,readOnly:!0,fullStar:!0,ratedFill:"#f5a623",starWidth:"32px"})},error:function(e){console.log("error"+e)}});var i=function(){e>0&&$.ajax({type:"GET",url:"/rating/0/producto/"+a,dataType:"json",success:function(a){1==a.success?($("#ratingStars").rateYo("option","ratedFill","#FFD700"),$("#ratingStars").rateYo("rating",a.rating)):$("#ratingStars").rateYo("rating",e)},error:function(e){console.log("error"+e)}})};$("#ratingStars").click(function(){r&&setTimeout(n,0)});var n=function(){o=t.rateYo("rating");var e=document.getElementById("idprod").value;$.ajax({type:"GET",url:"/rating/"+o+"/producto/"+e,dataType:"json",success:function(e){1==e.success?(console.log("exito:"+e.rating),$("#ratingStars").rateYo("rating",e.rating),$("#ratingStars").rateYo("option","ratedFill","#FFD700"),e.votos>0&&($("#totalVotos").html(e.votos),$("#numeroDeCalificaciones").text("("+e.votos+")"))):console.log(e)},error:function(e){console.log("error"+e)}})}},showMasVistos=function(){for(var e=1;e<9;e++)ScarabQueue.push(["recommend",{logic:"HOME_"+e,limit:10,containerId:"masv"+e,templateId:"recomendadosEmar",success:mySuccessHandler}]);ScarabQueue.push(["go"])},showHomeEmarsys=function(e){var a=document.getElementById("carruselHomeEmarsys2"),t=document.createElement("span");t.setAttribute("id","homerec1");var o=document.createElement("span");o.setAttribute("id","homerec2");var r=document.createElement("span");r.setAttribute("id","homerec3");var i=document.createElement("span");i.setAttribute("id","homerec4");var n=document.createElement("span");n.setAttribute("id","homerec5"),a.appendChild(t),a.appendChild(o),a.appendChild(r),a.appendChild(i),a.appendChild(n);for(var c=[],s=0,l=0,d="",u=1;u<=5;u++)ScarabQueue.push(["recommend",{logic:"HOME_"+u,limit:1,containerId:"homerec"+u,success:function(e,a){for(var t=0,o=e.page.products.length;t<o;t++){var r=e.page.products[t];r.precio=r.price.toLocaleString("en"),r.categoria1=r.category,r.categoria2=normalizar(r.category.split(">")[0]),r.title=normalizarCaracter(r.title),r.contador=t+1,r.imagen=proxyImagenes(r.image),d="<span>",d+="<a onclick=\"onPromoClick('"+r.link+"','home','slider-principal','"+r.contador+"');\"",d+='href="'+r.c_linkcategoria+'" data-scarabitem="'+r.item+'"  >';var i="undefined"!=typeof proxyImages&&null!==proxyImages?proxyImages:"";d+='<img src= "'+i+"/links-claroshop/custloads/555355173/categorias_home/"+r.categoria2+'.jpg"',d+='title="'+r.title+'">',d+="</a>",$.inArray(r.categoria2,c)<0&&l<3&&($("#carruselHomeEmarsys").append(d),l++),c[s]=r.categoria2,s++}}}]);e&&ScarabQueue.push(["go"])},templateCarruselEmarsys=function(e,a){for(var t,o,r="",i=0,n=0,c=0,s=e.page.products.length;c<s;c++){var l=e.page.products[c];i!=l.id&&(r="",l.precio=l.price.toLocaleString("en"),l.categoria1=l.category,l.title=normalizarCaracter(l.title),l.categoria2=normalizar(l.category.split(">")[0]),l.contador=j=c+1,l.seo=normalizar(l.title),l.imagen=proxyImagenes(l.image),r+='<article  data-scarabitem="'+l.id+'" class="productbox">',r+='<div class="vistaRapida"><div class="contImgProd" >',r+='<img src="'+l.imagen+'"/></div>',r+="<a onclick=\"onPromoClick('"+l.link+"','home','lo-mas-nuevo',"+c+');"   href="/producto/'+l.id+'/" class="linkProducto"></a>',r+='<a href="#modal-vistaRapida" onclick="home.modalnewHome('+l.id+');" class="btn-azul newBt">Vista rápida</a></div>',r+='<div class="carruselContenido">',r+='<div class="descrip"><p>'+l.title+"</p></div>",r+='<div class="info">',r+='<div class="infoDesc">',r+="</div>",r+='<span class="preciodesc">$'+l.precio+"</span>",r+='<div class="infoMensualidades">',""!==l.c_mensualidades&&null!=l.c_mensualidades&&(r+='<div class="desde"><span>Desde '+l.c_mensualidades+" al mes</span>",r+='<ul><li class="icoTelmex"></li><li class="icoSears"></li></ul>',r+="</div>"),r+="</div>",r+="</div>",r+='<div class="sellIcons">',r+='<div class="actionIcons"><ul>',r+='<li class="addCart">',"Si"==l.c_tallacolor?(r+='<a href="#modal-vistaRapida" onclick="home.modalnewHome('+l.id+',1);" class="addCart-animate btn-azul tooltip tooltip-effect-1">',r+='<span class="tooltip-content"><p>Agregar a mi carrito</p></span></a>'):(r+='<a href="#!" onclick="addCartAnimate('+l.id+');"  class="addCart-animate tooltip tooltip-effect-1">',r+='<span class="tooltip-content"><p>Agregar a mi carrito</p></span></a>'),r+='</li><li class="lineHeart bheartCarrusel"><a href="#modal-wishlist" onclick="wishList.modalWishlist('+l.id+');" class="blueHeart2 apC'+l.id+' tooltip tooltip-effect-1">',r+='<span class="tooltip-content"><p>Agregar a lista de deseos</p></span></a></li>',r+='<li class="vistaRapidaBtnC">',r+='<a href="#modal-vistaRapida" onclick="home.modalnewHome('+l.id+');" class="btn-azul vistaRapidaBtn tooltip tooltip-effect-1">',r+='<span class="tooltip-content"><p>Vista rápida</p></span></a></li></ul></div>',r+='<div class="shareIcon"><div class="shareMe">',r+='<ul><p>Compartir vía:</p><li><a href="https://www.facebook.com/sharer/sharer.php?u='+l.link+"&t="+l.title+'" target="_blank" class="icoFB"></a></li>',r+='<li><a href="http://twitter.com/home?status=Leyendo '+l.link+' en Sears" target="_blank" class="icoTW"></a></li><li><a href="#compartirEmail" class="icoEM" data-idproducto="'+l.id+'"></a></li><li><a href="whatsapp://send?text='+l.link+'" class="icoWS" data-action="share/whatsapp/share" ></a></li>',r+="</ul></div></div></div></div></article>",i=l.id,cantidad=$("#"+a+" article").length,cantidad>0&&n<13&&(o="promocion"+l.id,t=$("#"+a+" article:eq("+n+")").attr("id"),o!=t&&$(r).insertAfter("#"+a+" article:eq("+n+")")),n+=2,r="")}},renderCarruselTemporada=function(e,a){templateCarruselEmarsys(e,"sliderPrincipal")},renderCarruselMasVendido=function(e,a){templateCarruselEmarsys(e,"sliderMasVendido")},renderCarruselMasNuevo=function(e,a){templateCarruselEmarsys(e,"sliderMasNuevo")},showCarruselTemporada=function(e){ScarabQueue.push(["category","tecnología y electrónica > telefonía > celulares"]),ScarabQueue.push(["recommend",{logic:"POPULAR",containerId:"carruselTemporada",templateId:"recomendadosEmar",limit:12,success:renderCarruselTemporada}]),e&&ScarabQueue.push(["go"])},showCarruselMasVendido=function(e){ScarabQueue.push(["category","tecnología y electrónica > telefonía > celulares | hogar | videojuegos"]),ScarabQueue.push(["recommend",{logic:"POPULAR",containerId:"carruselMasVendido",templateId:"recomendadosEmar",limit:15,success:renderCarruselMasVendido}]),e&&ScarabQueue.push(["go"])},showCarruselMasNuevo=function(e){ScarabQueue.push(["category","tecnología y electrónica > telefonía > celulares | hogar | videojuegos"]),ScarabQueue.push(["recommend",{logic:"CATEGORY",containerId:"carruselMasNuevo",templateId:"recomendadosEmar",limit:15,success:renderCarruselMasNuevo}]),e&&ScarabQueue.push(["go"])},showHomeMasVistos=function(e){var a=document.getElementById("lomashomevisto"),t=document.createElement("span");t.setAttribute("id","homemasvistos1");var o=document.createElement("span");o.setAttribute("id","homemasvistos2");var r=document.createElement("span");r.setAttribute("id","homemasvistos3");var i=document.createElement("span");i.setAttribute("id","homemasvistos4");var n=document.createElement("span");n.setAttribute("id","homemasvistos5");var c=document.createElement("span");c.setAttribute("id","homemasvistos6");var s=document.createElement("span");s.setAttribute("id","homemasvistos7");var l=document.createElement("span");l.setAttribute("id","homemasvistos8"),a.appendChild(t),a.appendChild(o),a.appendChild(r),a.appendChild(i),a.appendChild(n),a.appendChild(c),a.appendChild(s),a.appendChild(l);for(var d=1;d<9;d++)ScarabQueue.push(["recommend",{logic:"TOPICAL_"+d,limit:1,containerId:"homemasvistos"+d,templateId:"recomendadosEmar",success:showVistos2}]);e&&ScarabQueue.push(["go"])},showRecomendadosEm=function(e){ScarabQueue.push(["recommend",{logic:"PERSONAL",limit:10,containerId:"recomendadosEm",templateId:"recomendadosEmar",success:mySuccessHandler}]),e&&ScarabQueue.push(["go"])},discovery={};!function(e){var a=new Array,t=1;e.setDiscovery=function(e,a){this.categoria=e,this.limit=a,discoveryEm2.innerHTML=""},e.showDiscovery=function(a,t){discObj.categoria=a,discObj.limit=10,discoveryEm2.innerHTML="",e.getDiscovery(discObj,!0)};var o=function(t,o){for(var r="",i=1,n=0,c=t.page.products.length;n<c;n++)a[n]=t.page.products[n],a[n].precio=a[n].price.toLocaleString("en"),a[n].seo=normalizar(a[n].title),a[n].imagen=proxyImagenes(a[n].image),r="",i=n+1,r+="<article onclick=\"onPromoClick('/producto/"+a[n].item+"/', 'home', 'discovery-"+a[n].categoria+"', "+i+')" class="cuadroProd" data-scarabitem="'+a[n].item+'">',r+='<div class="cuadroImg"><a href="/producto/'+a[n].item+'/">',r+="<h4><span>"+a[n].title+"</span></h4>",r+='<img src="'+a[n].imagen+'">',r+='<div class="info">',r+='<span class="preciodesc">$'+a[n].precio+"</span>",r+="</div>",r+="</a></div>",r+='<div class="cuadroIcons">',r+='<div class="lineHeart heartcuadroP">',r+='<a href="#modal-wishlist" onclick="wishList.modalWishlist('+a[n].item+');" class="blueHeart2 tooltip tooltip-effect-1">',r+='<span class="tooltip-content">',r+="<p>Agregar a lista de deseos</p></span>",r+="</a>",r+="</div>",r+='<div class="cuadroShare">',r+='<div class="shareMe">',r+="<ul>",r+="<p>Compartir vía:</p>",r+='<li><a href="http://www.facebook.com/sharer.php?u='+a[n].linkSanborns+"&t="+a[n].title+'" class="icoFB" target="_blank"></a></li>',r+='<li><a href="http://twitter.com/home?status=Leyendo '+a[n].linkSanborns+' en Sanborns" class="icoTW" target="_blank"></a></li>',r+='<li><a href="#compartirEmail" class="icoEM" data-idproducto="'+a[n].item+'"></a></li>',r+='<li><a href="whatsapp://send?text='+a[n].linkSanborns+'" class="icoWS" data-action="share/whatsapp/share"  ></a></li>',r+="</ul>",r+="</div>",r+="</div>",r+="</div>",r+="</article>",a[n].htmlOb=r;e.paginaDiscovery(1)};e.paginaDiscovery=function(e){for(var t=10*(e-1);t<10*e&&t<a.length;t++)discoveryEm2.innerHTML+=a[t].htmlOb},e.getDiscovery=function(e,a){t=1,$("#verMasDiscov").show(),"Todos"==e.categoria?ScarabQueue.push(["recommend",{logic:"PERSONAL",limit:90,containerId:"discoveryEm",templateId:"discoveryEma",success:o}]):(ScarabQueue.push(["category",e.categoria]),ScarabQueue.push(["recommend",{logic:"POPULAR",limit:90,containerId:"discoveryEm",templateId:"discoveryEma",success:o}])),a&&ScarabQueue.push(["go"])},e.vermasDiscovery=function(){t<e.numPages()&&(t++,e.paginaDiscovery(t)),t==e.numPages()&&$("#verMasDiscov").hide()},e.numPages=function(){return Math.ceil(a.length/10)}}(discovery);var getParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+e+"=([^&#]*)"),t=a.exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},marcaCorazonLista=function(){var e=document.getElementById("idsProducto").value;e.split(",")},marcaCorazonLista2=function(){for(var e=document.getElementById("idsProducto").value,a=e.split(","),t=document.querySelectorAll(".blueHeart2"),o=0;o<a.length;o++)for(var r=0;r<t.length;r++)if(-1!=t.item(r).getAttribute("onclick").indexOf(a[o])&&""!=a[o]){var i=t.item(r).parentNode;t.item(r).style.display="none",i.className+=" blueHeart";break}},verDetalles=function(){$(".mod__DescripcionP .viewMenu > li").removeClass("select"),$(".mod__DescripcionP .viewMenu li.laDescrip:eq(0)").addClass("select"),$(".mod__DescripcionP .viewDescrip > li").removeClass("show"),$(".mod__DescripcionP .viewDescrip li.laDescrip:eq(0)").addClass("show"),$("html, body").stop().animate({scrollTop:$(".laDescrip").offset().top-80},500,"swing")},otrasFormas=function(){$(".mod__DescripcionP .viewMenu > li").removeClass("select"),$(".mod__DescripcionP .viewMenu li.anchorFormas").addClass("select"),$(".mod__DescripcionP .viewDescrip > li").removeClass("show"),$(".mod__DescripcionP .viewDescrip li.anchorFormasCont").addClass("show"),$("html, body").stop().animate({scrollTop:$(".anchorFormas").offset().top-80},500,"swing")},clickSeguirTienda=function(e){location.href=e},carruselRelacionado404=function(e){ScarabQueue.push(["recommend",{logic:"PERSONAL",containerId:"rel404",templateId:"RelacionadoNav_404",limit:10,success:mySuccessHandler}]),e&&ScarabQueue.push(["go"])},carruselRelacionadoNav=function(e,a){ScarabQueue.push(["recommend",{logic:"RELATED",containerId:"rel1",templateId:"RelacionadoNav_nuevo",limit:10,success:mySuccessHandler}]),e&&ScarabQueue.push(["go"])},carruselRelacionado404=function(e){ScarabQueue.push(["recommend",{logic:"PERSONAL",containerId:"rel404",templateId:"RelacionadoNav_404",limit:10,success:mySuccessHandler}]),e&&ScarabQueue.push(["go"])},carruselRelacionadoNavCarr=function(e,a){if("undefined"!=a)var t="CART";else var t="PERSONAL";ScarabQueue.push(["recommend",{logic:t,containerId:"carritoRelacionados",templateId:"RelacionadoNav_nuevo",limit:10,success:mySuccessHandler}]),e&&ScarabQueue.push(["go"])},carruselCompraronPersonal=function(e){ScarabQueue.push(["recommend",{logic:"PERSONAL",containerId:"relpersonal",templateId:"RelacionadoNav_nuevo",limit:10,success:mySuccessHandler}]),e&&ScarabQueue.push(["go"])},carruselnoEncontraron=function(e){ScarabQueue.push(["recommend",{logic:"SEARCH",containerId:"lcar1Search",templateId:"RelacionadoNav_nuevo",limit:10,success:function(a,t){t(a),document.getElementById("recomendadosCarritoSearch").innerHTML=document.getElementById("lcar1Search").innerHTML,ScarabQueue.push(["recommend",{logic:"PERSONAL",containerId:"lcar2Search",templateId:"RelacionadoNav_nuevo",limit:10,success:function(e,a){a(e),document.getElementById("recomendadosCarritoSearch").innerHTML+=document.getElementById("lcar2Search").innerHTML,addSlider("recomendadosCarritoSearch",6,"")}}]),e&&ScarabQueue.push(["go"])}}]),e&&ScarabQueue.push(["go"])},carruselCompraronTam=function(e,a){ScarabQueue.push(["searchTerm",a]),ScarabQueue.push(["recommend",{logic:"SEARCH",containerId:"comprarontambiengeneral",templateId:"CompraronTam_nuevo",limit:10,success:renderTambien}]),e&&ScarabQueue.push(["go"])},renderCarrito=function(e,a){for(var t=0,o=e.page.products.length;t<o;t++){var r=e.page.products[t];r.title=normalizarCaracter(r.title),r.precio=r.price.toLocaleString("en"),r.categoria2=r.categoria1="",r.mensualidades="",null!=r.c_mensualidades&&""!==r.c_mensualidades&&(r.mensualidades=r.c_mensualidades),null!=r.category&&(r.categoria1=r.category,r.categoria2=normalizar(r.category.split(">")[0])),r.imagen=proxyImagenes(r.image)}addSlider("recomendadosCarrito",6,""),a(e)},carruselrecomendadosCarrito=function(e,a,t,o){ScarabQueue.push(["cart",[{item:a,price:t,quantity:o}]]),ScarabQueue.push(["recommend",{logic:"CART",containerId:"recomendadosCarrito",templateId:"CompraronTam_nuevo",limit:8,success:renderCarrito}]),e&&ScarabQueue.push(["go"])},carruselrecomendadosCarrito2=function(e,a){ScarabQueue.push(["view",a]),ScarabQueue.push(["recommend",{logic:"CART",containerId:"lcar1",templateId:"CompraronTam_nuevo",limit:5,success:function(t,o){o(t),document.getElementById("recomendadosCarrito").innerHTML=document.getElementById("lcar1").innerHTML,ScarabQueue.push(["view",a]),ScarabQueue.push(["recommend",{logic:"ALSO_BOUGHT",containerId:"lcar2",templateId:"CompraronTam_nuevo",limit:5,success:function(e,a){a(e),document.getElementById("recomendadosCarrito").innerHTML+=document.getElementById("lcar2").innerHTML,addSlider("recomendadosCarrito",6,"")}}]),e&&ScarabQueue.push(["go"])}}]),e&&ScarabQueue.push(["go"])},home={};!function(e){e.ratingLista=function(e,a){$("#"+e).rateYo({rating:a,readOnly:!0,ratedFill:"#f5a623",starWidth:"25px",halfStar:!0})};var a=[];e.modalnewHome=function(e,o){var r,i,n,c=htmlTalla=htmlImgsPager=htmlTitulo="";1==o||3==o?($("#comprar,#modalLinkDetalle2,.buy1cl,.tituloVistaRapida,.vistaR-Prod,#modalDescripcion,#modalPrecio").css("display","none"),$("#modal-vistaRapida").attr("class","vistaRapidaCarrito"),3==o&&($("#comprarf").css("display","block"),$(".agr-carr").css("display","none"))):($(".agr-carr,#comprarf,#comprar,#modalLinkDetalle2,.buy1cl,.tituloVistaRapida,.vistaR-Prod,#modalDescripcion,#modalPrecio").css("display",""),$("#modal-vistaRapida").removeClass("vistaRapidaCarrito")),loading(!0),$.ajax({type:"GET",url:"/producto/getProd/"+e,dataType:"json",success:function(e){for(htmlTitulo='<a href="/producto/'+e.id+'/">'+e.nombre+"</a>",$("#modalTitulo").html(htmlTitulo),i=0;i<e.fotos.length;i++)n=e.fotos[i],"3496"==e.tienda.id&&(n=n.replace("/120/","/1200/")),n=proxyImagenes(n),c+='<li><img src="'+n+'"></li>',htmlImgsPager+='<a data-slide-index="'+i+'" href="#"><img src="'+n+'"></a>';$("#carouselVR").append(c),$("#bx-pager_carouselVR").html(htmlImgsPager),addSlider("carouselVR",4,""),$("#bx-pager_carouselVR").slick("removeSlide",null,null,!0),$("#bx-pager_carouselVR").html(htmlImgsPager),addSlider("carouselVR",4,"");var o=300;t(e.tallaColorBis)||(o=200,htmlTalla+='<div class="boxColor"><span>Color</span>',htmlTalla+='<div class="opc_colors">',htmlTalla+='<select name="color" id="color" required="required" onchange="home.tallaSegunColor();">',htmlTalla+='<option value="" selected="selected">Seleccionar</option>',t(e.tallaColor)?$.each(e.color_sears,function(e,a){$.each(a,function(e,a){htmlTalla+='<option value="'+a+'">'+a+"</option>"})}):$.each(e.tallaColor,function(e,a){htmlTalla+='<option value="'+e+'">'+e+"</option>"}),htmlTalla+="</select>",htmlTalla+="</div>",htmlTalla+="</div>",a=e.tallaColorBis,htmlTalla+='<div class="boxTallas"><span>Tallas</span>',htmlTalla+='<div class="opc_sizes">',htmlTalla+='<select name="talla" id="talla" onchange="home.CambioPrecio('+e.id+',this)" class="campo required">',htmlTalla+="</select>",htmlTalla+="</div>",htmlTalla+="</div>",$("#opcTalla").html(htmlTalla));var s=e.descripcionHome.length>7?e.descripcionHome:e.atributos;$("#modalDescripcion").html(s.substr(0,o)+'... <a href="/producto/'+e.id+'/" name="modalLinkDetalle" id="modalLinkDetalle">Ver más &gt;</a>'),r=e.precio.toLocaleString("en"),$("#modalPrecio").text("$"+r),$("#modalLinkDetalle2").attr("href","/producto/"+e.id+"/"),$("#id").val(e.id),$("#nombre").val(e.nombre),$("#tienda").val(e.tienda.id),$("#precio").val(e.precio),$("#num_parte").val(e.sku),$.fancybox.open({href:"#modal-vistaRapida",titlePosition:"inside",transitionIn:"none",transitionOut:"none"})},beforeSend:function(){$("#carouselVR").empty(),$("#bx-pager_carouselVR").empty(),$("#opcTalla").empty()},complete:function(){loading(!1),recreaSlider("carouselVR"),recreaSlider("carouselVR_bx")},error:function(e){loading(!1)}})};var t=function(e){for(var a in e)if(e.hasOwnProperty(a))return!1;return!0};e.tallaSegunColor=function(){loading(!0),$colorSelected=$("#color").val(),$("#talla").attr("disabled",!1),$("#talla").find("option").remove().end().append('<option value="" disabled="">Seleccionar</option>').val(""),""!==$colorSelected?$.each(a[$colorSelected],function(e,a){$("#talla").append($("<option>",{value:a.tsize+"|"+a.stock+"|"+a.id,text:a.tsize}))}):$("#talla").attr("disabled",!0),loading(!1)},e.CambioPrecio=function(e,a){var t={productoId:e,talla:a.value};$.ajax({url:"/carrito/procesos/FancyComboTalla.php",type:"post",dataType:"json",async:!1,data:t,success:function(e){var a=document.getElementById("precioCambio");a.innerHTML="";var t=document.createTextNode("$ "+e.precio+" "),o=document.createElement("span"),r=document.createTextNode("MXN");o.appendChild(r),a.appendChild(t),a.appendChild(o),loading(!1)},beforeSend:function(){loading(!0)},error:function(){loading(!1)}})},e.linklomasvisto=function(e){switch(e){case 1:$("#linkmasvistos").attr("href","/promociones/masvisto/");break;case 2:$("#linkmasvistos").attr("href","/promociones/masvendido/");break;case 3:$("#linkmasvistos").attr("href","/promociones/masnuevo/");break;default:$("#linkmasvistos").attr("href","/promociones/masvisto/")}}}(home);var boletinE={};!function(e){e.suscribirseBoletin=function(e){var a=$("#newsletter").val();return loading(!0),validateEmail($("#newsletter").val())?($("#messageBoletin").hide(),$.ajax({type:"POST",url:"/suscribirseBoletin/",dataType:"json",data:{correo:a,genero:e},success:function(e){loading(!1),console.log(e),"success"==e.status?(console.log("Suscrito"),$.fancybox("#modal-newsletter",{titlePosition:"inside",transitionIn:"none",transitionOut:"none",afterLoad:function(){setTimeout(function(){$.fancybox.close()},7e3)}}),$("#newsletter").val("")):(console.log("Ocurrio un error"),alertaGenerica("Por favor intenta mas tarde."))},error:function(e){loading(!1),console.log("error"+e),alertaGenerica("Por favor intenta mas tarde.")}}),!1):($("#messageBoletin").text("Por favor ingresa un correo electrónico válido"),$("#messageBoletin").show(),loading(!1),!1)}}(boletinE);var wishList={};!function(e){var a=[];e.modalWishlist=function(a){var t=".apC"+a,o=$(t);$(o).attr("style",'background:rgba(0, 0, 0, 0) url("/css/vector/icon-blueheart.svg") no-repeat scroll center center'),e.wishlistHome(a),$("#corazon").addClass("blueHeart")},e.wishlistHome=function(a){var t,o=htmlTalla=htmlImgsPager="";loading(!0),$.ajax({type:"GET",url:"/producto/getProd/"+a,dataType:"json",success:function(a){t=a.fotos[0],"3496"==a.tienda.id&&(t=t.replace("/120/","/1200/")),t=proxyImagenes(t),o='<img src="'+t+'">',$("#vistaRcarouselWL").append(o),$("#idWL").val(a.id),$("#idWL").val(a.id),e.sendWL(),$.fancybox.open({href:"#modal-wishlist",titlePosition:"inside",transitionIn:"none",transitionOut:"none"})},beforeSend:function(){$("#vistaRcarouselWL").empty()},complete:function(){loading(!1)},error:function(e){loading(!1)}})},e.sendWL=function(){var a=$("#colorWL").val(),t=$("#tallaWL").val(),o=$("#idWL").val();e.addProducto(o,1,a,t)},e.tallaSegunColor=function(){loading(!0),$colorSelected=$("#colorWL").val(),$("#tallaWL").attr("disabled",!1),$("#tallaWL").find("option").remove().end().append('<option value="" disabled="">Seleccionar</option>').val(""),""!==$colorSelected?$.each(a[$colorSelected],function(e,a){$("#tallaWL").append($("<option>",{value:a.tsize+"|"+a.stock+"|"+a.id,text:a.tsize}))}):$("#tallaWL").attr("disabled",!0),loading(!1)},e.isEmptyO=function(e){for(var a in e)if(e.hasOwnProperty(a))return!1;return!0},e.addProducto=function(e,a,t,o){$.ajax({url:"/mi-cuenta/listadeseos/agrega/",type:"post",dataType:"json",cache:!1,data:{cantidad:1,id:e},beforeSend:function(){loading(!0)},success:function(a){if(!0===a.data.login)$("#wishlist_count").text(a.data.total_productos),$("#idsProducto").val($("#idsProducto").val()+","+e),$("#idsProductos").val($("#idsProductos").val()+","+e);else{var t=[];if(storedNames=JSON.parse(localStorage.getItem("idsProductos")),void 0!==storedNames&&null!==storedNames)for(var o=0;o<storedNames.length;o++){var r=t.indexOf(storedNames[o]);-1!==r&&t.splice(r,1),t.push(storedNames[o])}var i=t.indexOf(e);-1!==i&&t.splice(i,1),t.push(e),localStorage.setItem("idsProductos",JSON.stringify(t)),$("#idsProducto").val(t),$("#idsProductos").val(t),$("#wishlist_count").text(t.length)}loading(!1)},error:function(e,a,t){loading(!1),console.log("Ocurrió un error al agregar el producto a tu lista de deseos.")}})}}(wishList),$("#cantidadProductos").one("mouseover",function(e){$(".box__carrito").addClass("box-visible"),setTimeout(function(){$(".box__carrito").removeClass("box-visible")},1e3)}),previewCarrito=function(){var e,a;return console.log("previewCarrito 54"),new Date,a=$.Deferred(),e="/carrito/getCarrito/",$.ajax({type:"get",url:e,dataType:"json",success:function(e){var t;return(e.length>0||Object.keys(e).length)&&($(".boxCarritoCont").html(""),t="",$.each(e,function(e,a){
t+='<article class="caja__product"><div class="fila_producto"><div class="bcp_producto"><div class="contImg"><a href="/producto/'+a.id+"/"+a.seo+'"><img src="'+a.fotos[0]+'"></a></div><div class="contInfo"><a href="/producto/'+a.id+"/"+a.seo+'"><p class="producto">'+a.nombre+'</p></a><div class="info"><p>Vendido por: '+a.fabricante+"</p><p>cantidad: "+a.cantidad+" </p></div></div></div></div></article>"}),$(".boxCarritoCont").html(t),loading(!1)),a.resolve()},beforeSend:function(){return loading(!0)},error:function(){return a.fail(),loading(!1)}}),a.promise()};var ejecutaLocal=function(){var e=JSON.parse(localStorage.getItem("idsProductos"));return void 0!==e&&null!==e&&e.length>0&&(console.log("entra ajax"),$.ajax({type:"post",url:"/mi-cuenta/listadeseos/insertWishList/",data:{idsProductos:e},dataType:"json",success:function(e){return console.log("succes"),"success"==e.respuesta.status&&(localStorage.removeItem("idsProductos"),!0)},error:function(){console.log("error")}})),!0},cargar_listas_deseos=function(){1==document.getElementById("logeado").value?(console.log("logueado"),window.location="/mi-cuenta/listadeseos/"):(window.location="/",console.log("Favor de logguearse"))},ir_a_listaDeseos=function(){if(console.log("ir a lista deseos"),1==$("#logeado").val()){ejecutaLocal()&&setTimeout(function(){window.location="/mi-cuenta/listadeseos/"},5e3)}else{var e=JSON.parse(localStorage.getItem("idsProductos"));void 0!==e&&null!==e&&($("#idsProducto").val(e),$("#idsProductos").val(e))}},wishListcargaProducto=function(e,a){var t=document.getElementById(e),o=t.elements.id.value;0==a&&(1==document.getElementById("logeado").value?addCartNewhome(o,1):addCart(e,1)),1!=a&&3!=a||home.modalnewHome(o,a)},wishListeliminar=function(e,a){if(console.log("Prepara para borrar lista de deseos..."),1==document.getElementById("logeado").value)console.log("Borrando de lista de deseos"),$.ajax({url:"/mi-cuenta/listadeseos/quitar/",type:"post",dataType:"json",cache:!1,data:{id:e},success:function(t){!0===t.data.login&&($("#wishlist_count").text(t.data.total_productos),1==a&&(document.location="/carrito/")),$("#wishlist_producto_"+e).hide(),loading(!1)},error:function(e,a,t){loading(!1),console.log("Ocurrió un error al quitar de tu lista de deseos.")},beforeSend:function(){loading(!0)}});else{console.log("Borrando de lista de deseos");var t=JSON.parse(localStorage.getItem("idsProductos"));if(void 0!==t&&null!==t){for(var o=0;o<t.length;o++)if(e==t[o]){var r=t.indexOf(t[o]);t.splice(r,1),$("#wishlist_producto_"+e).hide()}localStorage.setItem("idsProductos",JSON.stringify(t)),$("#idsProducto").val(t),$("#idsProductos").val(t),$("#wishlist_count").text(t.length)}1==a&&(document.location="/carrito/")}},proxyImagenes=function(e){return"undefined"!=typeof proxyImages&&null!==proxyImages&&(e=e.replace("https://www.sanborns.com.mx/img/",proxyImages+"/imagenes-sanborns/"),e=e.replace("http://www.sanborns.com.mx/img/",proxyImages+"/imagenes-sanborns/"),e=e.replace("http://imagenes.sanborns.com.mx/",proxyImages+"/imagenes-sanborns/"),e=e.replace("https://imagenes.sanborns.com.mx/",proxyImages+"/imagenes-sanborns/"),e=e.replace("http://medios.plazavip.com/",proxyImages+"/medios-plazavip/"),e=e.replace("https://medios.plazavip.com/",proxyImages+"/medios-plazavip/"),e=e.replace("http://imagenes.claroshop.com/",proxyImages+"/imagenes-claroshop/"),e=e.replace("https://imagenes.claroshop.com/",proxyImages+"/imagenes-claroshop/"),e=e.replace("http://img.plazavip.com/",proxyImages+"/img-plazavip/"),e=e.replace("https://img.plazavip.com/",proxyImages+"/img-plazavip/"),e=e.replace("http://imgs.plazavip.com/",proxyImages+"/imgs-plazavip/"),e=e.replace("https://imgs.plazavip.com/",proxyImages+"/imgs-plazavip/"),e=e.replace("https://tienda.telmex.com",proxyImages+"/tienda-telmex/"),e=e.replace("http://medios-plazavip.sears.com.mx/",proxyImages+"/medios-plazavip/"),e=e.replace("https://medios-plazavip.sears.com.mx/",proxyImages+"/medios-plazavip/"),e=e.replace("https://imgsplaza.sears.com.mx/",proxyImages+"/imgsplaza-sears/"),e=e.replace("http://imgsplaza.sears.com.mx/",proxyImages+"/imgsplaza-sears/")),e},cambiarContrasena=function(){return $("#clave_nueva").val()!==$("#valida_clave").val()?(console.log("La contraseña no coincide"),$("#notificacion").html('<div class="ventana_emergente active" id="loginMessage" style="">La contraseña no coincide</div>'),!1):$("#clave_nueva").val().length<6?($("#notificacion").html('<div class="ventana_emergente active" id="loginMessage" style="">Debe ingresar al menos seis caracteres</div>'),!1):!!validarFormulario("frm_misdatos")||(console.log("Form no valido"),!1)},intercalarCarruseles=function(e,a){var t=k=0;for(totalpromo=$("#"+e+" article").length,totalpromoCur=$("#"+a+" article").length,t=0;t<totalpromo;t++)t<totalpromoCur&&($("#"+a+" article:eq(0)").insertAfter("#"+e+" article:eq("+k+")"),k+=2)},eventosDatalayer={};!function(e){e.Categoria=function(e,a){dataLayer.push({idCategoria:e,ecomm_pagetype:"category",ecomm_category:a})},e.Carrito=function(e,a){dataLayer.push({idProducto:e,totalCarrito:a,ecomm_pagetype:"cart",ecomm_prodid:e,ecomm_totalvalue:a})},e.Checkout=function(e){dataLayer.push({idProducto:e})},e.Purchase=function(e,a,t){dataLayer.push({idProducto:e,totalCarrito:t,ecomm_pagetype:"purchase",ecomm_prodid:e,ecomm_totalvalue:t})}}(eventosDatalayer);